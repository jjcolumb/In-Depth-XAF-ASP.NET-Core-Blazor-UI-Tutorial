# In-Depth-XAF-ASP.NET-Core-Blazor-UI-Tutorial

While we continue to extend the capabilities of XAF’s ASP.NET Core Blazor UI, you can deliver intuitive user experiences for the ASP.NET Core Blazor platform today. This tutorial documents how to build an application to store contacts and other related objects using XAF’s ASP.NET Core Blazor UI. 

![image](https://github.com/jjcolumb/In-Depth-XAF-ASP.NET-Core-Blazor-UI-Tutorial/assets/126447472/9792ce26-5370-4919-bb95-eeefe1cc834b)

If you are new to XAF, be sure to review our [XAF product](https://www.devexpress.com/products/net/application_framework/) page for important background information on our award-winning application framework.

## Dependencies and Prerequisites

Before you start the tutorial, read this section and ensure that the following conditions are met:

1.  [Visual Studio 2022 v17.0+](https://visualstudio.microsoft.com/)  (with the ASP.NET and web development workload) is installed on your machine. You have basic experience of .NET framework development in this IDE.
2.  [.NET 6 SDK](https://dotnet.microsoft.com/en-us/download/dotnet/6.0)  is installed on your machine.
3.  A  [free 30-day trial](https://www.devexpress.com/products/try/)  version or a licensed version of  [DevExpress Universal Subscription](https://www.devexpress.com/Subscriptions/Universal.xml)  is installed on your machine.
4.  You have basic knowledge of  [Object-relational mapping (ORM)](https://en.wikipedia.org/wiki/Object-relational_mapping)  concepts and the  [DevExpress XPO](https://www.devexpress.com/products/net/orm/).
5.  Any  [RDBMS](https://en.wikipedia.org/wiki/Relational_database_management_system)  supported by the XPO ORM tool (see  [Database Systems Supported by XPO](https://docs.devexpress.com/XPO/2114/product-information/database-systems-supported-by-xpo?v=22.1)) is installed and accessible from your machine to store the application data (a LocalDB or SQL Server Express instance is recommended).
6.  You are familiar with  [XAF application architecture](https://docs.devexpress.com/eXpressAppFramework/112559/overview/architecture?v=22.1).

## Tutorial Structure
This tutorial is organized in the following manner: 

* Business Model Design

This section explains how to implement classes that define the foundation of your application’s business model and its associated database structure.

* Extend Functionality

This section explains how to extend XAF’s autogenerated UI with custom commands.

* UI Customization

This section explains how to customize XAF’s autogenerated ASP.NET Core Blazor application UI.

## Connection String

This tutorial uses Microsoft’s SQL Server as its target database management system (DBMS). As you may already know, XAF supports multiple database management systems (see the list  [here](https://docs.devexpress.com/XPO/2114/product-information/database-systems-supported-by-xpo?v=22.1)). If you’d like to use a different DBMS, be sure to specify the appropriate  [connection string](https://docs.devexpress.com/XPO/2114/product-information/database-systems-supported-by-xpo?v=22.1#how-to-create-a-correct-connection-string).

XAF apps create a database with a name that matches the name used for the solution itself. To change names, edit the connection string in the application configuration file (_appsettings.json_).

To recreate your database, drop it from the database server or remove the file. Your XAF application will recreate the database at next startup.
# Business Model Design
This section explains how to design a business model (database) for an application built with the eXpressApp Framework. 

You will learn how to complete the following tasks:

* Create business classes mapped to database tables 
* Specify relationships between classes 
* Implement dependent properties 
* Add property value validation 

You can design a business model in any of the following ways:

-   **Use the DevExpress Business Class Library**
    
    The  [Business Class Library](https://docs.devexpress.com/eXpressAppFramework/112571/business-model-design-orm/built-in-business-classes-and-interfaces?v=22.1)  includes frequently used business classes, such as  **Person**,  **Event**,  **Task**, etc. You can use a class from this library as is, or inherit and extend it.
    
-   **Build Custom Classes**
    
    If you use  **XPO**, inherit your business objects from  [Base Persistent Classes](https://docs.devexpress.com/eXpressAppFramework/113146/business-model-design-orm/business-model-design-with-xpo/base-persistent-classes?v=22.1).

> TIP: For information on how to build an application based on an existing database, refer to the following topic: How to: [Generate XPO Business Classes for Existing Data Tables](https://docs.devexpress.com/eXpressAppFramework/113451/business-model-design-orm/business-model-design-with-xpo/generate-xpo-business-classes-for-existing-data-tables?v=22.1).

Once you complete the tutorial, your basic ASP.NET Core Blazor CRUD application will look as shown in the image below.

![image](https://github.com/jjcolumb/In-Depth-XAF-ASP.NET-Core-Blazor-UI-Tutorial/assets/126447472/c2e7c254-8cb0-4e34-a0e4-f9cbb1469e86)

# Create a Solution (XPO)

This lesson creates a new XAF solution and guides you through the XAF Solution Wizard. In the Wizard, you will do the following:

-   Add a Blazor UI project to the solution.
-   Select an ORM tool to use for data management.
-   Turn on user authentication.
-   Review available built-in modules and enable the Validation module.

At the end of this lesson, you can run the application for the first time.

## Step-by-Step Instructions

1.  From Visual Studio’s main menu, select  **File**  |  **New**  |  **Project…**  to invoke the  **Create a new project**  dialog.
    
2.  Select  **DevExpress v22.1  XAF Template Gallery**  and click  **Next**. Specify the project’s name (“MySolution”) and click  **Create**.
    
    ![Create a new XAF project](https://docs.devexpress.com/eXpressAppFramework/images/spm_newproject_blazor.png?v=22.1)
    
3.  In the invoked Template Gallery window, switch to the  **.NET Core**  section. Select  **XAF Solution Wizard (.NET Core)**  and click  **Run Wizard**.
    
    ![Select "XAF Solution Wizard (.NET Core)" in the Template Gallery](https://docs.devexpress.com/eXpressAppFramework/images/MainDemo_TemplateGallery_RunWizard.png?v=22.1)
    
4.  On the first page of the Solution Wizard, you can select the target platform. Since this tutorial only demonstrates the Blazor UI, select the  **Web (ASP.NET Core Blazor)**  option and click  **Next**.
    
    ![Select the "Web (ASP.NET Core Blazor)" platform](https://docs.devexpress.com/eXpressAppFramework/images/SPM_SolutionWizard_Platform_Blazor.png?v=22.1)
    
5.  Choose the  [DevExpress eXpress Persistent Objects](https://docs.devexpress.com/XPO/7969/product-information/main-features?v=22.1)  ORM library.
    
    ![Select the ORM tool](https://docs.devexpress.com/eXpressAppFramework/images/btutor_solution_wizard_2.png?v=22.1)
    
6.  Choose the authentication type for your application. In this tutorial, we use  **Standard**. Click  **Next**.
    
    ![Select "Standard" authentication type](https://docs.devexpress.com/eXpressAppFramework/images/btutorial_solution_wizard_3.png?v=22.1)
    
7.  Select the ready-to-use XAF modules you want to add to your application. This tutorial requires the  **Validation**  module. Click  **Finish**.
    
    ![Select "Validation" module](https://docs.devexpress.com/eXpressAppFramework/images/btutor_solution_wizard_4.png?v=22.1)
    
    The solution contains the following projects:
    
    -   **MySolution.Blazor.Server**  - the ASP.NET Core Blazor application project that automatically generates the ASP.NET Core Blazor CRUD user interface. This project depends on the  _MySolution.Module_.
    -   **MySolution.Module**  - the  [module](https://docs.devexpress.com/eXpressAppFramework/118046/application-shell-and-base-infrastructure/application-solution-components/modules?v=22.1)  project that contains platform-independent code.
        
        ![Solution Explorer view](https://docs.devexpress.com/eXpressAppFramework/images/btutorial_bmd_lesson1_2.png?v=22.1)
        
    
    Refer to the  [Application Solution Structure](https://docs.devexpress.com/eXpressAppFramework/118045/application-shell-and-base-infrastructure/application-solution-components/application-solution-structure?v=22.1)  topic for information on the XAF solution structure.
    
8.  You can now run the application. Click  **Start Debugging**  or press F5.
    
    The following images show the resulting ASP.NET Core Blazor application. Log in as “Admin” and use an empty string as the password.
    
    ![Login window of your application](https://docs.devexpress.com/eXpressAppFramework/images/btutorial_bmd_lesson1_3.png?v=22.1)
    
    ![Detail View of the Admin user in your application](https://docs.devexpress.com/eXpressAppFramework/images/btutorial_bmd_lesson1_4.png?v=22.1)
    

## Initial Connection to Database

The wizard attempts to find the installed  **Microsoft SQL Server**  instance (**LocalDB**  or  **Express**) and sets the connection string accordingly.

Refer to the  [Connect an XAF Application to a Database Provider](https://docs.devexpress.com/eXpressAppFramework/113155/business-model-design-orm/connect-an-xaf-application-to-a-database-provider?v=22.1)  topic for details on how to connect to different database systems.

# Inherit from the Business Class Library Class (XPO)

In this lesson, you will learn how to implement business classes for your application using the  [Business Class Library](https://docs.devexpress.com/eXpressAppFramework/112571/business-model-design-orm/built-in-business-classes-and-interfaces?v=22.1). This library contains the most typical ready-to-use business classes. You will implement a custom  **Contact**  class by deriving from the  **Person**  class available in this library, and implement several additional properties. You will also learn the basics of automatic user interface construction based on data.

## Step-by-Step Instructions

1.  Right-click the  _Business Objects_  folder in the  _MySolution.Module_  project, and choose  **Add Item**  |  **Class…**, specify  _Contact.cs_  as the new class name and click  **Add**.
2.  Replace the generated class declaration with the following code.
  
    
    ```csharp
    using DevExpress.Persistent.Base;
    using DevExpress.Persistent.BaseImpl;
    using DevExpress.Persistent.Validation;
    using DevExpress.Xpo;
    using System;
    
    namespace MySolution.Module.BusinessObjects {
        [DefaultClassOptions]
        public class Contact : Person {
            public Contact(Session session) : base(session) { }
            private string webPageAddress;
            public string WebPageAddress {
                get { return webPageAddress; }
                set { SetPropertyValue(nameof(WebPageAddress), ref webPageAddress, value); }
            }
            private string nickName;
            public string NickName {
                get { return nickName; }
                set { SetPropertyValue(nameof(NickName), ref nickName, value); }
            }
            private string spouseName;
            public string SpouseName {
                get { return spouseName; }
                set { SetPropertyValue(nameof(SpouseName), ref spouseName, value); }
            }
            private TitleOfCourtesy titleOfCourtesy;
            public TitleOfCourtesy TitleOfCourtesy {
                get { return titleOfCourtesy; }
                set { SetPropertyValue(nameof(TitleOfCourtesy), ref titleOfCourtesy, value); }
            }
            private DateTime anniversary;
            public DateTime Anniversary {
                get { return anniversary; }
                set { SetPropertyValue(nameof(Anniversary), ref anniversary, value); }
            }
            private string notes;
            [Size(4096)]
            public string Notes {
                get { return notes; }
                set { SetPropertyValue(nameof(Notes), ref notes, value); }
            }
        }
        public enum TitleOfCourtesy { Dr, Miss, Mr, Mrs, Ms };
    }
    
    ```
    
3.  Run the application.
    
    XAF generates a user interface that is based on the specified data structures:
    
    -   a  **List View**
        
        List View displays the  **Contact**  list. If users click the  **New**  button or click an existing record, the application shows a detail form ([Detail View](https://docs.devexpress.com/eXpressAppFramework/112611/ui-construction/views?v=22.1)) filled with editors for each data field.
        
        ![XAF ASP.NET Core Blazor App List View](https://docs.devexpress.com/eXpressAppFramework/images/btutor_bmd_lesson2_listview.png?v=22.1)
        
    -   A  **Detail View**
        
        ![XAF ASP.NET Core Blazor App Detail View](https://docs.devexpress.com/eXpressAppFramework/images/btutor_bmd_lesson2_detailview.png?v=22.1)
        

## Detailed Explanation

### Convention

Typically, business classes do not depend on application UI and should be implemented in a  [platform-independent module project](https://docs.devexpress.com/eXpressAppFramework/118045/application-shell-and-base-infrastructure/application-solution-components/application-solution-structure?v=22.1). Business objects can be shared with other XAF or non-XAF applications.

### Add a Business Object

In this lesson, we derive the  **Contact**  object from the  **Person**  class. The  **Person**  class is one of the  [Business Class Library](https://docs.devexpress.com/eXpressAppFramework/112571/business-model-design-orm/built-in-business-classes-and-interfaces?v=22.1)  classes. This class already contains fields specific to entities of the Person type: first name, last name, birth date, etc.

The  **Person**  class (and the rest of the Business Class Library) derives from  [BaseObject](https://docs.devexpress.com/eXpressAppFramework/DevExpress.Persistent.BaseImpl.BaseObject?v=22.1). The  **BaseObject**  class derives from  [DevExpress.Xpo.XPCustomObject](https://docs.devexpress.com/XPO/DevExpress.Xpo.XPCustomObject?v=22.1)  - one of the base classes in XPO. This means that the  **Contact**  business object is a  _persistent object_.

XPO requires that you implement property setters and a parameterized constructor as follows:


```csharp
[DefaultClassOptions]
public class Contact : Person {
    public Contact(Session session) : base(session) { }
    private string webPageAddress;
    public string WebPageAddress {
        get { return webPageAddress; }
        set { SetPropertyValue(nameof(WebPageAddress), ref webPageAddress, value); }
    }
    // ...
}

```

Refer to the following help topic for more information:  [Creating a Persistent Object](https://docs.devexpress.com/XPO/2077/create-a-data-model/create-a-persistent-object?v=22.1).

For a general business class concept overview, refer to the following topic:  [Business Classes vs Database Tables](https://docs.devexpress.com/eXpressAppFramework/112570/business-model-design-orm/business-model-design-with-xpo/business-classes-vs-database-tables?v=22.1).

> NOTE
>
>[CodeRush](https://www.devexpress.com/products/coderush/) includes a number of Code Templates that help generate business classes or their parts with a few keystrokes. To learn about the Code Templates for **eXpress Persistent Objects**, refer to the following help topic: [XPO and XAF Templates](https://docs.devexpress.com/CodeRushForRoslyn/118557/coding-assistance/code-templates/xpo-templates?v=22.1).

### Attributes

In this tutorial the business objects class is decorated with the  [DefaultClassOptionsAttribute](https://docs.devexpress.com/eXpressAppFramework/DevExpress.Persistent.Base.DefaultClassOptionsAttribute?v=22.1)  attribute. This attribute means that the following capabilities are available for the  **Contact**  business class.

-   The  **Contact**  item is added to the main page’s navigation control. Users can click this item to access the associated  [List View](https://docs.devexpress.com/eXpressAppFramework/112611/ui-construction/views?v=22.1).
    
    ![](https://docs.devexpress.com/eXpressAppFramework/images/btutor-bmd-lesson2-navigationitem.png?v=22.1)
    
-   **Contact**  objects can be used as a data source to generate reports (see  [Create a Report in Visual Studio](https://docs.devexpress.com/eXpressAppFramework/112734/getting-started/in-depth-tutorial-winforms-webforms/extra-modules/create-a-report-in-visual-studio?v=22.1)).

To apply each of these options separately, use the  [NavigationItemAttribute](https://docs.devexpress.com/eXpressAppFramework/DevExpress.Persistent.Base.NavigationItemAttribute?v=22.1)  and  [VisibleInReportsAttribute](https://docs.devexpress.com/eXpressAppFramework/DevExpress.Persistent.Base.VisibleInReportsAttribute?v=22.1)  attributes.

### User Interface

XAF generates the appropriate editors for data fields in the List View and Detail View. For example, a date picker is generated for date-time values, a combo box editor is created for  **Title Of Courtesy**  (an enumerator).

XAF transforms captions from camel-case to space-separated strings, form titles are updated, etc.

You can use the grid features in a List View at runtime: rearrange columns, and sort and filter data:

![](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-blazor-buildmodel-listview.gif?v=22.1)

# Supply Initial Data (XPO)

>NOTE:
>Before proceeding, take a moment to review the [Inherit from the Business Class Library Class (XPO)](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1) lesson.

## Step-by-Step Instructions

1.  Open the  _Updater.cs_  file located in the  _MySolution.Module_  project’s  _Database Update_  folder. Add the following code to the  [ModuleUpdater.UpdateDatabaseAfterUpdateSchema](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Updating.ModuleUpdater.UpdateDatabaseAfterUpdateSchema?v=22.1)  method.
    

    ```csharp
    using MySolution.Module.BusinessObjects;
    //...
    
    public class Updater : DevExpress.ExpressApp.Updating.ModuleUpdater {
        //...
        public override void UpdateDatabaseAfterUpdateSchema() {
            base.UpdateDatabaseAfterUpdateSchema();
    
            Contact contactMary = ObjectSpace.FirstOrDefault<Contact>(contact => contact.FirstName == "Mary" && contact.LastName == "Tellitson"); 
            if (contactMary == null) {
                contactMary = ObjectSpace.CreateObject<Contact>();
                contactMary.FirstName = "Mary";
                contactMary.LastName = "Tellitson";
                contactMary.Email = "tellitson@example.com";
                contactMary.Birthday = new DateTime(1980, 11, 27);
            }
            //...
            ObjectSpace.CommitChanges();
        }
    }
    
    ```
    
2.  Run the application. Select the  **Contact**  item in the navigation control. Notice that the new contact, “Mary Tellitson”, appears on the list to the right.
    
    ![xaf ASP.NET Core Blazor supply initial data](https://docs.devexpress.com/eXpressAppFramework/images/tutorial_bmd_lesson2_5.png?v=22.1)
    

## Detailed Explanation

### Database Update

In step 1, you add a code that checks whether the contact list contains an entry that matches the name “Mary Tellitson”. If such a contact does not exist, the code creates and adds it to the database.

An  **XAF**  application checks application and database version compatibility on each start. The following checks are performed:

-   The database exists.
-   All required tables exist.
-   All required columns exist.

The  [XafApplication.DatabaseVersionMismatch](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.XafApplication.DatabaseVersionMismatch?v=22.1)  event occurs if any of these checks fails.

The ASP.NET Core Blazor application handles this event in a solution template. When the application runs in debug mode, this event handler uses the built-in  **Database Updater**  to update the application’s database. After the database schema is updated, the  [ModuleUpdater.UpdateDatabaseAfterUpdateSchema](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Updating.ModuleUpdater.UpdateDatabaseAfterUpdateSchema?v=22.1)  method is called. In this method, you can save the required business objects to the database.

### Query Data

As you can see in the code above, XAF uses an  [Object Space](https://docs.devexpress.com/eXpressAppFramework/113707/data-manipulation-and-business-logic/object-space?v=22.1)  object to manipulate persistent objects (see  [Create, Read, Update and Delete Data](https://docs.devexpress.com/eXpressAppFramework/113711/data-manipulation-and-business-logic/create-read-update-and-delete-data?v=22.1)).

# Implement Custom Business Classes and Reference Properties (XPO)

This lesson explains the following concepts:

-   How to implement business classes from scratch
-   How to implement object references to existing classes
-   How XAF generates UI for referenced objects

>NOTE
>Before you proceed, take a moment to review the previous lesson: [Inherit from the Business Class Library Class (XPO)](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1).

## Step-by-Step Instructions

1.  Add the following  **Department**  and  **Position**  persistent classes to the  _Contact.cs_  file.
    

    ```csharp
    namespace MySolution.Module.BusinessObjects {
        // ...    
        [DefaultClassOptions]
        [System.ComponentModel.DefaultProperty(nameof(Title))]
        public class Department : BaseObject {
            public Department(Session session) : base(session) { }
            private string title;
            public string Title {
                get { return title; }
                set { SetPropertyValue(nameof(Title), ref title, value); }
            }
            private string office;
            public string Office {
                get { return office; }
                set { SetPropertyValue(nameof(Office), ref office, value); }
            }
        }
        [DefaultClassOptions]
        [System.ComponentModel.DefaultProperty(nameof(Title))]
        public class Position : BaseObject {
            public Position(Session session) : base(session) { }
            private string title;
            public string Title {
                get { return title; }
                set { SetPropertyValue(nameof(Title), ref title, value); }
            }
        }
    }
    
    ```
    
2.  Add the  **Department**  and  **Position**  properties to the  **Contact**  class:
    

    ```csharp
    [DefaultClassOptions]
    public class Contact : Person {
        //...
        private Department department;
        public Department Department {
            get {return department;}
            set {SetPropertyValue(nameof(Department), ref department, value);}
        }
        private Position position;
        public Position Position {
            get {return position;}
            set {SetPropertyValue(nameof(Position), ref position, value);}
        }
        //...
    }
    
    ```
    
    The  **Contact**  class now exposes the  **Position**  and  **Department**  reference properties.
    
3.  Run the application.
    
    After you run the application you can see that the navigation control displays two new items:  **Department**  and  **Position**. You can click the new items to access department and position lists.
    
    -   Department detail form:
        
        ![xaf ASP.NET Core Blazor detail view](https://docs.devexpress.com/eXpressAppFramework/images/btutor_bmd_custom_department_detail.png?v=22.1)
        
    -   Department list:
        
        ![xaf ASP.NET Core Blazor list view](https://docs.devexpress.com/eXpressAppFramework/images/btutor_bmd_custom_department_list.png?v=22.1)
        
    
    In the  **Contact**  Detail View, XAF creates lookup editors for  **Department**  and  **Position**. These editors use a special type of  [View](https://docs.devexpress.com/eXpressAppFramework/112611/ui-construction/views?v=22.1)  - Lookup List View. Typically, this View includes a single column that displays values from the class’s default property. See additional information about default properties later in this topic.
    
    ![xaf ASP.NET Core Blazor detail view lookup editor](https://docs.devexpress.com/eXpressAppFramework/images/btutor_bmd_contact_detail_view.png?v=22.1)
    
    Users can select  **Department**  or  **Position**  values from the dropdown lists. Note that Lookup editors support incremental filtering:
    
    ![xaf ASP.NET Core Blazor detail view lookup editor incremental filtering](https://docs.devexpress.com/eXpressAppFramework/images/tutorial_blazor_bmd_lookup_incremental_filtering.gif?v=22.1)
    

## Detailed Explanation

### Default Property

The  **Position**  and  **Department**  classes are decorated with the  **DefaultProperty**  attribute. This attribute specifies the  [default property](https://docs.devexpress.com/eXpressAppFramework/113525/business-model-design-orm/how-to-specify-a-display-member-for-a-lookup-editor-detail-form-caption?v=22.1)  of the class. You can specify the most descriptive property of your class in the  **DefaultProperty**  attribute, and its values will then be displayed in the following:

-   Detail form captions
-   The leftmost column of a List View
-   Lookup List Views

Refer to the  [Data Annotations in Data Model](https://docs.devexpress.com/eXpressAppFramework/112701/business-model-design-orm/data-annotations-in-data-model?v=22.1)  topic for more information.

# Set a Many-to-Many Relationship (XPO)

This lesson explains how to create a many-to-many relationship between business objects and how XAF generates the UI for such relationships.

>NOTE
Before you proceed, take a moment to review the previous lesson: [Inherit from the Business Class Library Class (XPO)](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1).

## Step-by-Step Instructions

1.  Right-click the  _Business Objects_  folder in the  _MySolution.Module_  project, and choose  **Add**  |  **Class…**. Change the file name to  _Task.cs_  and click  **Add**. Replace the new file’s content with the following code:
    

    ```csharp
    using DevExpress.ExpressApp.Model;
    using DevExpress.Persistent.Base;
    using DevExpress.Persistent.BaseImpl;
    using DevExpress.Xpo;
    
    namespace MySolution.Module.BusinessObjects {
        [DefaultClassOptions]
        [ModelDefault("Caption", "Task")]
        public class DemoTask : Task {
            public DemoTask(Session session) : base(session) { }
            [Association("Contact-DemoTask")]
            public XPCollection<Contact> Contacts {
                get {
                    return GetCollection<Contact>(nameof(Contacts));
                }
            }
        }
    }
    
    ```
    
2.  Add the  **Tasks**  property in the  **Contact**  class implementation.
    

    ```csharp
    [DefaultClassOptions]
    public class Contact : Person {
        //...
        [Association("Contact-DemoTask")]
        public XPCollection<DemoTask> Tasks {
            get {
                return GetCollection<DemoTask>(nameof(Tasks));
            }
        }
    }
    
    ```
    
3.  Run the application.
    
    In the  **Contact**  detail view, the application displays the following elements:
    
    1.  A list of assigned tasks;
    2.  The  **New**  button - allows users to add a new assigned task;
    3.  The  **Link**  button - allows users to assign the current contact an existing task.
    
    ![many-to-many relationship UI](https://docs.devexpress.com/eXpressAppFramework/images/btutor_bmd_lesson5_contact_tasks.png?v=22.1)
    
    You can find the same UI in the  **Tasks**  detail view.
    
    ![many-to-many relationship UI](https://docs.devexpress.com/eXpressAppFramework/images/btutor_bmd_lesson5_task_conntacts.png?v=22.1)
    

## Detailed Explanation

### Add an Association

In the  _DemoTask_  class,  [AssociationAttribute](https://docs.devexpress.com/XPO/DevExpress.Xpo.AssociationAttribute?v=22.1)  is applied to the  **Contacts**  property of the  [XPCollection](https://docs.devexpress.com/XPO/DevExpress.Xpo.XPCollection?v=22.1)  type. This property represents a collection of associated Contacts. XPO uses the  **Association**  attribute to set a relationship between objects. The  **Contacts**  property getter implementation - the  **GetCollection**  method - is used to return a collection.


```csharp
[Association("Contact-DemoTask")]
public XPCollection<Contact> Contacts {
    get {
        return GetCollection<Contact>(nameof(Contacts));
    }
}

```

In the  **Contact**  class, the  **Tasks**  property is the second part of the  **Contact-DemoTask**  relationship. Note that the  **Association**  attribute must be applied to this property as well.


```csharp
[DefaultClassOptions]
public class Contact : Person {
    //...
    [Association("Contact-DemoTask")]
    public XPCollection<DemoTask> Tasks {
        get {
            return GetCollection<DemoTask>(nameof(Tasks));
        }
    }
}

```

>NOTE
Do not modify the **XPCollection** property declaration demonstrated above. If you manipulate the collection or introduce any additional settings within the declaration, it may cause unpredictable behavior.

After you run the application, XPO will generate the intermediate tables and relationships.

### Change Application Model in Code

The  **DemoTask**  class is decorated with the  [ModelDefaultAttribute](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Model.ModelDefaultAttribute?v=22.1)  attribute. The attribute parameters specify that the  **Caption**  property of the Application Model’s  **BOModel**  |  **DemoTask**  node is set to “Task”.

You can apply the  **ModelDefault**  attribute to a business class or its member to change any property of the Application Model’s  **BOModel** | **_<Class>_**  or  **BOModel** | **_<Class>_** | **OwnMembers** | **_<Member>_**  node.

# Set a One-to-Many Relationship (XPO)

This lesson explains how to create a one-to-many relationship between business objects and how XAF generates the UI for such a relationship.

>NOTE
Before you proceed, take a moment to review the previous lessons:

-   [Inherit from the Business Class Library Class (XPO)](https://docs.devexpress.com/eXpressAppFramework/112718/getting-started/in-depth-tutorial-winforms-webforms/business-model-design/inherit-from-the-business-class-library-class-xpo?v=22.1)
-   [Implement Custom Business Classes and Reference Properties (XPO)](https://docs.devexpress.com/eXpressAppFramework/112732/getting-started/in-depth-tutorial-winforms-webforms/business-model-design/implement-custom-business-classes-and-reference-properties-xpo?v=22.1)
-   [Set a Many-to-Many Relationship (XPO)](https://docs.devexpress.com/eXpressAppFramework/112719/getting-started/in-depth-tutorial-winforms-webforms/business-model-design/set-a-many-to-many-relationship-xpo?v=22.1)

## Step-by-Step Instructions

1.  To implement the “One” part of the  _Department-Contacts_  relationship, decorate the  **Contact**  class’  **Department**  property with the  [AssociationAttribute](https://docs.devexpress.com/XPO/DevExpress.Xpo.AssociationAttribute?v=22.1).
  
    
    ```csharp
    [DefaultClassOptions]
    public class Contact : Person {
        //...
        private Department department;
        [Association("Department-Contacts")]
        public Department Department {
            get {return department;}
            set {SetPropertyValue(nameof(Department), ref department, value);}
        }
        //...
    }
    
    ```
    
    Refer to the following help topic for information on the  **Association**  attribute:  [Set a Many-to-Many Relationship (XPO)](https://docs.devexpress.com/eXpressAppFramework/112719/getting-started/in-depth-tutorial-winforms-webforms/business-model-design/set-a-many-to-many-relationship-xpo?v=22.1).
    
2.  To implement the “Many” part of the  _Department-Contacts_  relationship, add the  **Contacts**  property to the  **Department**  class and decorate this property with the  **Association**  attribute.
    

    
    ```csharp
    public class Department : BaseObject {
        //...
        [Association("Department-Contacts")]
        public XPCollection<Contact> Contacts {
            get {
                return GetCollection<Contact>(nameof(Contacts));
            }
        }
    }
    
    ```
    
3.  Run the application.
    
    Open the  **Department**  detail view. You can see the  **Contacts**  group. To add objects to the  **Contacts**  collection, use the  **New**  or  **Link**  button in this tab. The  **Link**  button allows users to add references to existing  **Contact**  objects.
    
    ![blazor one-to-many relation new link button](https://docs.devexpress.com/eXpressAppFramework/images/btutorial_bmd_lesson6.png?v=22.1)
    
    To remove a reference to an object from this collection, use the  **Unlink**  button.
    
    ![blazor one-to-many relation unlink button](https://docs.devexpress.com/eXpressAppFramework/images/btutorial_bmd_lesson6_unlink.png?v=22.1)
    

>TIP
If you create a new **Department** and then create a new **Contact** in the **Contacts** collection, the associated **Department** is not immediately visible in the [Detail View](https://docs.devexpress.com/eXpressAppFramework/112611/ui-construction/views?v=22.1) of the newly created **Contact**. The link between these objects is added later when you save the **Contact**. To change this behavior, use the [XafApplication.LinkNewObjectToParentImmediately](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.XafApplication.LinkNewObjectToParentImmediately?v=22.1) property. When the property value is `true`, the application creates a link and saves it immediately after you click **New**.

# Initialize Business Object Properties (XPO)


This lesson explains how to initialize properties in newly created business objects.

For this purpose, you will add the  **Priority**  property to the  **DemoTask**  class created in the  [Set a Many-to-Many Relationship (XPO)](https://docs.devexpress.com/eXpressAppFramework/402168/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/set-a-many-to-many-relationship-xpo?v=22.1)  lesson. Then you will override the  **AfterConstruction**  method to initialize the new property.

>NOTE
Before you proceed, take a moment to review the previous lessons:
>-   [Inherit from the Business Class Library Class (XPO)](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1)
>-   [Set a Many-to-Many Relationship (XPO)](https://docs.devexpress.com/eXpressAppFramework/402168/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/set-a-many-to-many-relationship-xpo?v=22.1)

## Step-by-Step Instructions

1.  Add the  **Priority**  property to the  **DemoTask**  class and declare the  **Priority**  enumeration, as shown below:
    

    ```csharp
    public class DemoTask : Task {
        // ...
        private Priority priority;
        public Priority Priority {
            get { return priority; }
            set {
                SetPropertyValue(nameof(Priority), ref priority, value);
            }
        }
        //...
    }
    public enum Priority {
        Low,
        Normal,
        High
    }
    
    ```
    
2.  To initialize the newly added  **Priority**  property when a  **DemoTask**  object is created, override the  **AfterConstruction**  method, as shown below:
    

    
    ```csharp
    [DefaultClassOptions]
    [ModelDefault("Caption", "Task")]
    public class DemoTask : Task {
        //...
        public override void AfterConstruction() {
            base.AfterConstruction();
            Priority = Priority.Normal;
        }
        //...
    }
    
    ```
    
3.  Run the application.
    
    Create a new  **DemoTask**  object. In the Task detail view, the  **Priority**  property is set to  `Priority.Normal`, as declared in the code above.
    
    ![xaf ASP.NET Core Blazor nitialize property value](https://docs.devexpress.com/eXpressAppFramework/images/tutorial_bmd_lesson12.png?v=22.1)
    
    Note that XAF generates a combo box for the  **Priority**  property. The combo box items are the enumeration values declared in the step 2.
    
    ![blazor combobox for enum](https://docs.devexpress.com/eXpressAppFramework/images/btutor_bmd_combobox_for_enum.png?v=22.1)
    

## Detailed Explanation

### Initialize Property Values

The  [AfterConstruction](https://docs.devexpress.com/XPO/DevExpress.Xpo.PersistentBase.AfterConstruction?v=22.1)  method is executed when a new business object is created. In this tutorial, you override this method to set the  **Priority**  property to  `Priority.Normal`  when a new  **DemoTask**  object is created.

# Implement Dependent Reference Properties (XPO)
This lesson explains how to implement properties whose values can depend on other properties.

You will add a new  **Manager**  property to the  **Contact**  class. The editor for this property will display a list of managers who work in the same department.

![](https://docs.devexpress.com/eXpressAppFramework/images/btutor_lookup_filter.png?v=22.1)

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   [Inherit from the Business Class Library Class (XPO)](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1)
>-   [Implement Custom Business Classes and Reference Properties (XPO)](https://docs.devexpress.com/eXpressAppFramework/402163/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/implement-custom-business-classes-and-reference-properties-xpo?v=22.1)
>-   [Set a One-to-Many Relationship (XPO)](https://docs.devexpress.com/eXpressAppFramework/402169/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/set-a-one-to-many-relationship-xpo?v=22.1)

## Step-by-Step Instructions

1.  Add a new  **Manager**  property of the  **Contact**  type to the  **Contact**  class.
    
    -   [C#](https://docs.devexpress.com/eXpressAppFramework/402164/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/implement-dependent-reference-properties-xpo?v=22.1#tabpanel_q-z+JItiMa_tabid-csharp)
    
    ```
    [DefaultClassOptions]
    public class Contact : Person {
        //...
        private Contact manager;
        public Contact Manager {
           get { return manager; }
           set { SetPropertyValue(nameof(Manager), ref manager, value); }
        }
        //...
    }
    
    ```
    
2.  Apply the  **DataSourceProperty**  and  **DataSourceCriteria**  attributes to the newly added property.
    

    
    ```csharp
    [DefaultClassOptions]
    public class Contact : Person {
        //...
        [DataSourceProperty("Department.Contacts", DataSourcePropertyIsNullMode.SelectAll)]
        [DataSourceCriteria("Position.Title = 'Manager' AND Oid != '@This.Oid'")]
        public Contact Manager {
            // ...
        }
        // ...
    }
    
    ```
    
3.  Run the application.
    
    Add the following objects:
    
    -   a  **Department**  object (for example, “Developer Department”)
    -   multiple  **Contact**  objects with the  **Department**  property set to “Developer Department”
    -   multiple  **Position**  objects (for example, “Manager”, “Developer”).
    
    For the newly added contacts, set the  **Position**  property to:
    
    -   “Manager” (for multiple  **Contact**  objects);
    -   “Developer” (for other  **Contact**  objects).
    
    ![xaf ASP.NET Core Blazor list view](https://docs.devexpress.com/eXpressAppFramework/images/btutor_bmd_managers.png?v=22.1)
    
    Create a new  **Contact**  object. In the  **Contact**  Detail View, specify the  **Department**  property and expand the  **Manager**  lookup editor. Notice the following:
    
    -   The  **Department**  property of the listed objects is the same as those you specified above.
    -   The  **Position**  property is set to “Manager” for each of the listed objects.
    
    ![xaf ASP.NET Core Blazor prefilter lookup items](https://docs.devexpress.com/eXpressAppFramework/images/btutorial_bmd_department_dependent_properties.png?v=22.1)
    

## Detailed Explanation

You can use integrated XAF designers to implement the same behavior without code. For details, refer to the following lesson:  [Filter Data Source for a Lookup Editor](https://docs.devexpress.com/eXpressAppFramework/404170/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/filter-data-source-for-lookup-editor-xpo?v=22.1).

### The DataSourceProperty Attribute

The  **DataSourceProperty**  attribute accepts two parameters. The first one specifies the path to the lookup list. The second parameter is optional. It specifies how the lookup items are populated if the application could not find any items from the path.

In this tutorial, the second parameter is set to  [SelectAll](https://docs.devexpress.com/eXpressAppFramework/DevExpress.Persistent.Base.DataSourcePropertyIsNullMode?v=22.1). You can also set the  [SelectNothing](https://docs.devexpress.com/eXpressAppFramework/DevExpress.Persistent.Base.DataSourcePropertyIsNullMode?v=22.1)  or  [CustomCriteria](https://docs.devexpress.com/eXpressAppFramework/DevExpress.Persistent.Base.DataSourcePropertyIsNullMode?v=22.1)  values. In the latter case, a third parameter is required to specify criteria.

### The DataSourceCriteria Attribute

With the  **DataSourceCriteria**  attribute applied, the  **Manager**  lookup editor contains  **Contact**  objects that satisfy the criteria specified in the attribute parameter.

# Implement Property Value Validation in Code (XPO)

This lesson explains how to set validation rules for business classes and their properties. XAF applies these rules when a user executes the specified operation (for example, saves an edited object).

In this lesson you will create a rule that requires that the  **Position.Title**  property must not be empty. The application will apply the rule when a user saves a  **Position**  object.

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   [Inherit from the Business Class Library Class (XPO)](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1)
>-   [Implement Custom Business Classes and Reference Properties (XPO)](https://docs.devexpress.com/eXpressAppFramework/402163/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/implement-custom-business-classes-and-reference-properties-xpo?v=22.1)

>NOTE
To use XAF Validation functionality, install the `DevExpress.ExpressApp.Validation.Blazor` NuGet package and [register](https://docs.devexpress.com/eXpressAppFramework/118047/application-shell-and-base-infrastructure/application-solution-components/ways-to-register-a-module?v=22.1) the Validation module in your project.

The project wizard adds this package to all new applications with the enabled security options.

## Step-by-Step Instructions

1.  Apply the  [RuleRequiredFieldAttribute](https://docs.devexpress.com/eXpressAppFramework/DevExpress.Persistent.Validation.RuleRequiredFieldAttribute?v=22.1)  attribute to the  **Title**  property in the  **Position**  class. As a parameter, specify the context that triggers the rule (for example,  `DefaultContexts.Save`):
    

    
    ```csharp
    using DevExpress.Persistent.Validation;
    //...
    [DefaultClassOptions]
    [System.ComponentModel.DefaultProperty(nameof(Title))]
    public class Position : BaseObject {
       //...
       private string title;
       [RuleRequiredField(DefaultContexts.Save)]
       public string Title {
          get { return title; }
          set { SetPropertyValue(nameof(Title), ref title, value); }
       }
    }
    
    ```
    
2.  Run the application.
    
    Click the  **New**  button to create a new  **Position**  object. Leave the  **Title**  property empty and click  **Save**. The error message is displayed:
    
    ![XAF ASP.NET Core Blazor validation](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-blazor-buildmodel-validation.gif?v=22.1)
    

## Detailed Explanation

The  **RuleRequiredField**  attribute defines a validation rule that ensures that the  **Position.Title**  property has a value when the  **Position**  object is saved.

The Validation System offers a number of Rules and Contexts. For details, refer to the  [Validation Rules](https://docs.devexpress.com/eXpressAppFramework/113008/validation/validation-rules?v=22.1)  topic. The Application Model stores all rules so that an admin can add and edit Rules and Contexts with the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1)  (see the  [Implement Property Value Validation in the Application Model](https://docs.devexpress.com/eXpressAppFramework/402142/getting-started/in-depth-tutorial-blazor/ui-customization/implement-property-value-validation-in-the-application-model?v=22.1)  topic).

# Filter Data Source for a Lookup Editor (XPO)

This lesson explains how to filter data displayed in a lookup editor. This editor appears in a Detail View for reference properties and contains a list of objects of another related class.

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   [Inherit from the Business Class Library Class](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1)
>-   [Implement Custom Business Classes and Reference Properties](https://docs.devexpress.com/eXpressAppFramework/402163/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/implement-custom-business-classes-and-reference-properties-xpo?v=22.1)
>-   [Implement Dependent Reference Properties](https://docs.devexpress.com/eXpressAppFramework/402164/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/implement-dependent-reference-properties-xpo?v=22.1)
>-   [Set a Many-to-Many Relationship](https://docs.devexpress.com/eXpressAppFramework/402168/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/set-a-many-to-many-relationship-xpo?v=22.1)

## Step-by-Step Instructions

1.  Specify a Many-to-Many relationship between the  `Position`  and  `Department`  classes. For more information, refer to the following topic:  [Set a Many-to-Many Relationship (XPO)](https://docs.devexpress.com/eXpressAppFramework/402168/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/set-a-many-to-many-relationship-xpo?v=22.1).
  
    ```csharp
    [DefaultClassOptions]
    [System.ComponentModel.DefaultProperty(nameof(Title))]
     public class Department : BaseObject {
       //...
       [Association("Departments-Positions")]
       public XPCollection<Position> Positions {
          get { return GetCollection<Position>(nameof(Positions)); }
       }
    }
    
    [DefaultClassOptions]
    [System.ComponentModel.DefaultProperty(nameof(Title))]
    public class Position : BaseObject {
          //...
       [Association("Departments-Positions")]
       public XPCollection<Department> Departments {
          get { return GetCollection<Department>(nameof(Departments)); }
       }
    }
    
    ```
    
    ----------
    
2.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1). Navigate to the  **BOModel**  |  **MySolution.Module.BusinessObjects**  node. Expand the  **Contact**  child node and select the  **OwnMembers**  |  **Position**  child node.
    
    Make the following changes to the node’s properties:
    
    -   Set the  **DataSourceProperty**  property to  `Department.Positions`.
    -   Set the  **DataSourcePropertyIsNullMode**  property to  `SelectAll`.
    
    ![XAF ASP.NET Core Blazor filter lookup editor](https://docs.devexpress.com/eXpressAppFramework/images/tutorial_uic_filter-lookup-editor.png?v=22.1)
    
3.  In the  _Contact_  class (_BusinessObjects\Contact.cs_), replace the  `Department`  property declaration with the following code:
  
    ```csharp
    [Association("Department-Contacts", typeof(Department)), ImmediatePostData]
    public Department Department {
       get {return department;}
       set {
          SetPropertyValue(nameof(Department), ref department, value);
           // Clear Position and Manager properties if the Department has changed.
          if(!IsLoading) {
             Position = null;
             if(Manager != null && Manager.Department != value) {
                Manager = null;
             }
          }
       }
    }
    
    ```
    
    ----------
    
4.  Run the application. Open a department’s Detail View and Link several  **Position**  items to this department.
    
5.  Open the Detail View of a contact that belongs to this department. The  **Position**  editor dropdown lists the positions you linked in the previous step:
    
    ![XAF ASP.NET Core Blazor filter lookup editor](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-uic-filter-lookup-contact-positions.png?v=22.1)

# Extend Functionality


Before you proceed with this section of the tutorial, you should familiarize yourself with the following basic concepts of the  **eXpressApp Framework**.

**Action**

Visually, Action is a toolbar item or another control that performs the associated code when an end user manipulates it. XAF has several predefined Action types. You can choose the appropriate type depending on how you want your Action to be displayed within the UI. All Actions expose the  **Execute**  event whose handler is executed when end users manipulate the corresponding element. For more details, refer to the  [Actions](https://docs.devexpress.com/eXpressAppFramework/112622/ui-construction/controllers-and-actions/actions?v=22.1)  topic.

**Controller**

Controllers are classes inherited from the  [Controller](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Controller?v=22.1)  class. This class has the following descendants that can also serve as base classes for controllers:

-   [ViewController](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.ViewController?v=22.1)  and its generic versions:  [ViewController<ViewType>](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.ViewController-1?v=22.1)  and  [ObjectViewController<ViewType, ObjectType>](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.ObjectViewController-2?v=22.1)
-   [WindowController](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.WindowController?v=22.1)

Controllers  [implement business logic](https://docs.devexpress.com/eXpressAppFramework/113711/data-manipulation-and-business-logic/create-read-update-and-delete-data?v=22.1)  in your application. This logic is either executed automatically (for example, on activation of a View) or triggered when a user executes an Action declared within the Controller. XAF uses  [reflection](https://docs.microsoft.com/en-us/dotnet/framework/reflection-and-codedom/reflection)  to automatically collect controllers implemented within modules. Controller classes should be  _public_. The Controller properties and base class determine a View or a Window where this controller is active. For more details, refer to the  [Controllers](https://docs.devexpress.com/eXpressAppFramework/112621/ui-construction/controllers-and-actions/controllers?v=22.1)  topic.

Controllers and Actions are instruments that implement custom features in an XAF application. In this tutorial section, you will learn how to add Actions of different types, implement Controllers without Actions, and modify the behavior of existing Controllers and Actions. It is recommended that you complete the lessons in the following order:

-   [Add a Simple Action](https://docs.devexpress.com/eXpressAppFramework/402157/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-simple-action?v=22.1)
-   [Add a Parametrized Action](https://docs.devexpress.com/eXpressAppFramework/402155/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-parametrized-action?v=22.1)
-   [Add an Action that Displays a Pop-up Window](https://docs.devexpress.com/eXpressAppFramework/402158/getting-started/in-depth-tutorial-blazor/extend-functionality/add-an-action-that-displays-a-pop-up-window?v=22.1)
-   [Add an Action with Option Selection](https://docs.devexpress.com/eXpressAppFramework/402159/getting-started/in-depth-tutorial-blazor/extend-functionality/add-an-action-with-option-selection?v=22.1)
-   [Add a Simple Action using an Attribute](https://docs.devexpress.com/eXpressAppFramework/402156/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-simple-action-using-an-attribute?v=22.1)
-   [Access Editor Settings](https://docs.devexpress.com/eXpressAppFramework/402153/getting-started/in-depth-tutorial-blazor/extend-functionality/access-editor-settings?v=22.1)
-   [Access Grid Control Settings](https://docs.devexpress.com/eXpressAppFramework/402154/getting-started/in-depth-tutorial-blazor/extend-functionality/access-data-grid-settings?v=22.1)

# Add a Simple Action (.NET 6)

This lesson explains how to create a  **Simple Action**.

A  **Simple Action**  is a button that executes custom code when a user clicks it.

The instructions below demonstrate how to add the  **Clear tasks**  button to the  **Contact**  Detail View. A click on this button clears all  **Tracked Tasks**  of the specific  **Contact**.

![Blazor simple action button](https://docs.devexpress.com/eXpressAppFramework/images/blazor-simple-action-button.png?v=22.1)

>NOTE
Before you proceed, take a moment to review the previous lessons:
>-   Inherit from the Business Class Library Class ([XPO](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1))
>-   Implement Custom Business Classes and Reference Properties ([XPO](https://docs.devexpress.com/eXpressAppFramework/402163/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/implement-custom-business-classes-and-reference-properties-xpo?v=22.1))
>-   Set a Many-to-Many Relationship ([XPO](https://docs.devexpress.com/eXpressAppFramework/402168/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/set-a-many-to-many-relationship-xpo?v=22.1))

## Step-by-Step Instructions

1.  Add a View Controller. In the  **Solution Explorer**, right-click the  _Controllers_  folder in the  _MySolution.Module_  project and choose  **Add DevExpress Item**  |  **New Item…**  to invoke the  [Template Gallery](https://docs.devexpress.com/eXpressAppFramework/113455/installation-upgrade-version-history/visual-studio-integration/template-gallery?v=22.1). Select the  **XAF Controllers** | **View Controller**  Visual Studio template, specify  _ClearContactTasksController_  as the new item’s name and click  **Add Item**.
    
    ![Tutorial_EF_Lesson1_1](https://docs.devexpress.com/eXpressAppFramework/images/tutorial_netcore_add_viewcontroller.png?v=22.1)
    
2.  Visual Studio displays an autogenerated  _ClearContactTasksController.cs_  file with a single View Controller declaration. In the controller constructor, specify the controller properties:
   
    ```csharp
    using DevExpress.ExpressApp;
    
    //...
    public partial class ClearContactTasksController : ViewController {
        public ClearContactTasksController() {
            InitializeComponent();
            //Activate the Controller only in the Detail View
            TargetViewType = ViewType.DetailView;
            //Specify the type of objects that can use the Controller
            TargetObjectType = typeof(Contact);
        }
    // ...
    
    ```
    
    If you do not specify the  `TargetObjectType`  property, the application displays the controller’s actions for each detail form.
    
   > TIP 
    You can also create a generic [ViewController<ViewType>](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.ViewController-1?v=22.1) or [ObjectViewController<ViewType, ObjectType>](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.ObjectViewController-2?v=22.1) object and specify the target type as the `ViewType` parameter. For more information on how to customize controller functionality, refer to the following topic: [Define the Scope of Controllers and Actions](https://docs.devexpress.com/eXpressAppFramework/113103/ui-construction/controllers-and-actions/define-the-scope-of-controllers-and-actions?v=22.1).
    
3.  Add a new action to the controller and a handler for the action’s  `Execute`  event:
    

    
    ```csharp
    using DevExpress.ExpressApp;
    using DevExpress.ExpressApp.Actions;
    using DevExpress.Persistent.Base;
    using MySolution.Module.BusinessObjects;
     //...
    public partial class ClearContactTasksController : ViewController {
        public ClearContactTasksController() {
            InitializeComponent();
            TargetViewType = ViewType.DetailView;
            TargetObjectType = typeof(Contact);
    
            SimpleAction clearTasksAction = new SimpleAction(this, "ClearTaskAction", PredefinedCategory.View) {
                //Specify the Action's button caption.
                Caption = "Clear tasks",
                //Specify the confirmation message that pops up when a user executes an Action.
                ConfirmationMessage = "Are you sure you want to clear the Tasks list?",
                //Specify the icon of the Action's button in the interface.
                ImageName = "Action_Clear"
            };
            //This event fires when a user clicks the Simple Action control.
            clearTasksAction.Execute += ClearTasksAction_Execute;
        }
        private void ClearTasksAction_Execute(Object sender, SimpleActionExecuteEventArgs e) {
            while(((Contact)View.CurrentObject).Tasks.Count > 0) {
                ((Contact)View.CurrentObject).Tasks.Remove(((Contact)View.CurrentObject).Tasks[0]);
                ObjectSpace.SetModified(View.CurrentObject);
            }
        }
    // ...
    
    ```
    
    You can  [use one of the standard images](https://docs.devexpress.com/eXpressAppFramework/112745/getting-started/in-depth-tutorial-winforms-webforms/ui-customization/assign-a-standard-image?v=22.1)  as the icon of the Action’s button or  [import your own](https://docs.devexpress.com/eXpressAppFramework/112744/getting-started/in-depth-tutorial-winforms-webforms/ui-customization/assign-a-custom-image?v=22.1).
    
    The main entry point of a Simple Action is its  **Execute**  event. Handle this event to execute custom code.
    
4.  Run the application.
    
    Open a detail form for a  **Contact**  item. Link several tasks to this item and save it.
    
    Click the  **Clear tasks**  button. A confirmation message appears. Click  **OK**  to remove all  **Tasks**  from the current  **Contact**.
    
    ![](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-blazor-simpleaction.gif?v=22.1)
    
   > TIP 
    You can display an action’s button in a Detail View layout instead of a toolbar: [How to: Include an Action in a Detail View Layout](https://docs.devexpress.com/eXpressAppFramework/112816/ui-construction/view-items-and-property-editors/include-an-action-to-a-detail-view-layout?v=22.1).

# Add a Parametrized Action (.NET 6)



This lesson explains how to add a  **Parametrized Action**. The  **Parametrized Action**  displays an editor that allows users to type in a parameter value before running the action.

The instructions below demonstrate how to implement a new View Controller with a Parametrized Action. This Action searches for a  **DemoTask**  object by its  **Subject**  property value and displays the detail form of the found object.

>NOTE
Before you proceed, take a moment to review the previous lessons:
>-   **Inherit from the Business Class Library Class** ([XPO](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1)/[EF core](https://docs.devexpress.com/eXpressAppFramework/402981/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/inherit-from-the-business-class-library-class-ef-core?v=22.1))
>-   **Initialize Business Object Properties** ([XPO](https://docs.devexpress.com/eXpressAppFramework/402167/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/initialize-a-property-after-creating-an-object-xpo?v=22.1)/[EF core](https://docs.devexpress.com/eXpressAppFramework/402982/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/initialize-a-property-after-creating-an-object-ef-core?v=22.1))
>-   [Add a Simple Action](https://docs.devexpress.com/eXpressAppFramework/402157/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-simple-action?v=22.1)

## Step-by-Step Instructions

1.  Add a new View Controller to the  _MySolution.Module_  project, as described in the  [Add a Simple Action](https://docs.devexpress.com/eXpressAppFramework/402157/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-simple-action?v=22.1)  lesson. Name it  _FindBySubjectController_.
    
2.  In the  _MySolution.Module_  |  _Controllers_  |  _FindBySubjectController.cs_  file, specify the controller’s properties:

    ```csharp
    using DevExpress.ExpressApp;
    // ...
    public partial class FindBySubjectController : ViewController {
        public FindBySubjectController() {
            InitializeComponent();
            //Activate the controller only in the List View.
            TargetViewType = ViewType.ListView;
            //Activate the controller only for root Views.
            TargetViewNesting = Nesting.Root;
            //Specify the type of objects that can use the controller.
            TargetObjectType = typeof(DemoTask);
        }
        // ...
    }
    
    ```
    
    For more information about the root View, see the following topic:  [IsRoot](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.View.IsRoot?v=22.1).
    
3.  Add a Parametrized Action to the Controller:
  
    ```csharp
    public partial class FindBySubjectController : ViewController {
        public FindBySubjectController() {
            InitializeComponent();
            TargetViewType = ViewType.ListView;
            TargetViewNesting = Nesting.Root;
            TargetObjectType = typeof(DemoTask);
    
            ParametrizedAction findBySubjectAction =
                new ParametrizedAction(this, "FindBySubjectAction", PredefinedCategory.View, typeof(string)) {
                    ImageName= "Action_Search",
                    NullValuePrompt = "Find task by subject..."
                };
            findBySubjectAction.Execute += FindBySubjectAction_Execute;
        }
    // ...
    }
    
    ```
    
    A user submits a string in the Action’s editor. This raises the Action’s  [ParametrizedAction.Execute](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Actions.ParametrizedAction.Execute?v=22.1)  event.
    
4.  Handle the Action’s  `Execute`  event:
    

    ```csharp
    public partial class FindBySubjectController : ViewController {
        public FindBySubjectController() {
         // ...
            findBySubjectAction.Execute += FindBySubjectAction_Execute;
        }
        private void FindBySubjectAction_Execute(object sender, ParametrizedActionExecuteEventArgs e) {
            var objectType = ((ListView)View).ObjectTypeInfo.Type;
            IObjectSpace objectSpace = Application.CreateObjectSpace(objectType);
            string paramValue = e.ParameterCurrentValue as string;
            object obj = objectSpace.FindObject(objectType, 
                CriteriaOperator.Parse("Contains([Subject], ?)",  paramValue));
            if(obj != null) {
                DetailView detailView = Application.CreateDetailView(objectSpace, obj);
                detailView.ViewEditMode = DevExpress.ExpressApp.Editors.ViewEditMode.Edit;
                e.ShowViewParameters.CreatedView = detailView;
            }
        }
    // ...
    }
    
    ```
    
    For details on the event handler implementation, refer to the  [Detailed Explanation](https://docs.devexpress.com/eXpressAppFramework/402155/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-parametrized-action?v=22.1#detailed-explanation)  section.
    
5.  Run the application.
    
    Select the  **Task**  item in the navigation control (the  **Find Task by Subject**  editor is the Action you implemented). Type a word from an existing task’s  **Subject**  into this editor and press Enter. The application displays a detail form with this task.
    
    ![blazor tutorial parameterized action](https://docs.devexpress.com/eXpressAppFramework/images/blazor_tutorial_parameterized_action.gif?v=22.1)

    ## Detailed Explanation

### Search Implementation

In XAF, you use the  [Object Space](https://docs.devexpress.com/eXpressAppFramework/113707/data-manipulation-and-business-logic/object-space?v=22.1)  to query and update persistent objects. Call the static  [XafApplication.CreateObjectSpace](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.XafApplication.CreateObjectSpace.overloads?v=22.1)  method to create an Object Space.

Use the  [IObjectSpace.FindObject](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.IObjectSpace.FindObject.overloads?v=22.1)  method to find a  `DemoTask`  object. This method has the following parameters:

-   The type of the objects displayed in the current List View. Use the  [View.ObjectTypeInfo](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.View.ObjectTypeInfo?v=22.1).
-   Search criteria. To generate a criteria, create a  `BinaryOperator`  object and pass criteria components as the constructor’s parameters. For more information, refer to the following XPO documentation:  [Simplified Criteria Syntax](https://docs.devexpress.com/CoreLibraries/4928/devexpress-data-library/criteria-language-syntax?v=22.1).

### Create a New View

To show the found object in a separate Detail View:

1.  Call the  [XafApplication.CreateDetailView](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.XafApplication.CreateDetailView.overloads?v=22.1)  method to create a View.
2.  Assign the View to the  [e.ShowViewParameters.CreatedView](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.ShowViewParameters.CreatedView?v=22.1)  property of the event parameter.

>TIP
You can initialize the `ShowViewParameters` property in the `Execute` event handler of any Action of any type. This allows you to always show a View after an Action is executed.

For more information on how to show a View in a separate window, refer to the following topic:  [Ways to Show a View](https://docs.devexpress.com/eXpressAppFramework/112803/ui-construction/views/ways-to-show-a-view/ways-to-show-a-view?v=22.1).

### Manage an XAF Application

The  [XafApplication](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.XafApplication?v=22.1)  object is useful when you need to create a List View, Detail View, Object Space, etc. A user can access an  `XafApplication`  object from many locations in an XAF application. In Controllers, use the  [Controller.Application](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Controller.Application?v=22.1)  to get such access.

# Add an Action that Displays a Pop-Up Window (.NET 6)

This lesson explains how to create an Action that shows a pop-up window. This type of Action is useful when a user wants to input multiple parameters in a pop-up dialog before an Action is executed.

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   Set a Many-to-Many Relationship ([XPO](https://docs.devexpress.com/eXpressAppFramework/402168/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/set-a-many-to-many-relationship-xpo?v=22.1)/[EF core](https://docs.devexpress.com/eXpressAppFramework/402983/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/set-a-many-to-many-relationship-ef-core?v=22.1))
>-   [Add a Simple Action](https://docs.devexpress.com/eXpressAppFramework/402157/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-simple-action?v=22.1)

In this tutorial, you will implement the ability to add notes from a predefined list to task descriptions.

## Step-by-Step Instructions

1.  Add the  `Note`  business object from the  [Business Class Library](https://docs.devexpress.com/eXpressAppFramework/112571/business-model-design-orm/built-in-business-classes-and-interfaces?v=22.1)  to your application. To do this, add the following code to the  _MySolution.Module_  |  _Module.cs_  file:
   
    ```csharp
    using DevExpress.Persistent.BaseImpl.EF;
    // ...
    public sealed partial class MySolutionModule : ModuleBase {
        public MySolutionModule() {
            // Adds a business object
            AdditionalExportedTypes.Add(typeof(Note));
        }
        // ...
    }
    
    ```
    
2.  If you are working with  **EF Core**, register the  `Note`  type in  `DbContext`. Edit the  _BusinessObjects\MySolutionDbContext.cs_  file as shown below:
 
    ```csharp
    public class MySolutionEFCoreDbContext : DbContext {
        //...
        public DbSet<Note> Notes { get; set; }
    }
    
    ```
    
3.  If you are working with  **EF Core**, add a migration and update the database. See the following section for details:  [Use a DBMS: Setup Migrations](https://docs.devexpress.com/eXpressAppFramework/404144/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/create-a-solution-ef-core?v=22.1#use-a-dbms-setup-migrations).
    
4.  Add a new View Controller to the  **MySolution.Module**  project. Name it  _PopupNotesController_.
    
5.  In the  _PopupNotesController.cs_  file, specify the controller properties:
    
    ```csharp
    using DevExpress.ExpressApp;
    using DevExpress.Persistent.BaseImpl.EF;
    // ...
    public partial class PopupNotesController : ViewController {
        // ...
        public PopupNotesController() {
            InitializeComponent();
            //Target the required Views and create their Actions
            TargetObjectType = typeof(DemoTask);
            TargetViewType = ViewType.DetailView;
        }
        // ...
    }
    
    ```
    
6.  Add the  `ShowNotesAction`  action and handle its  `CustomizePopupWindowParams`  event:
  
    ```csharp
    public partial class PopupNotesController : ViewController {
        public PopupNotesController() {
            InitializeComponent();
            TargetObjectType = typeof(DemoTask);
            TargetViewType = ViewType.DetailView;
            /*Invoke a pop-up window with a specified View and execute custom code
              when a user clicks the OK or Cancel button*/
            PopupWindowShowAction showNotesAction = new PopupWindowShowAction(this, "ShowNotesAction", PredefinedCategory.Edit) {
                Caption = "Show Notes"
            };
    
            showNotesAction.CustomizePopupWindowParams += ShowNotesAction_CustomizePopupWindowParams;
        }
    
        private void ShowNotesAction_CustomizePopupWindowParams(object sender, CustomizePopupWindowParamsEventArgs e) {
            IObjectSpace objectSpace = Application.CreateObjectSpace(typeof(Note));
            string noteListViewId = Application.FindLookupListViewId(typeof(Note));
            CollectionSourceBase collectionSource = Application.CreateCollectionSource(objectSpace, typeof(Note), noteListViewId);
            e.View = Application.CreateListView(noteListViewId, collectionSource, true);
        }
        // ...
    }
    
    ```
    
    In this step, you handle the  [PopupWindowShowAction.CustomizePopupWindowParams](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Actions.PopupWindowShowAction.CustomizePopupWindowParams?v=22.1)  event and set the required View to the handler’s  [e.View](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Actions.CustomizePopupWindowParamsEventArgs.View?v=22.1)  parameter. This code creates the  **Notes**  List View when it generates the pop-up window.
    
7.  Handle the  `ShowNotesAction`‘s  `Execute`  event:
   
    ```csharp
    // ...
    public PopupNotesController() {
        // ...
        showNotesAction.Execute += ShowNotesAction_Execute;
    }
    
    private void ShowNotesAction_Execute(object sender, PopupWindowShowActionExecuteEventArgs e) {
        DemoTask task = (DemoTask)View.CurrentObject;
        foreach(Note note in e.PopupWindowViewSelectedObjects) {
            if(!string.IsNullOrEmpty(task.Description)) {
                task.Description += Environment.NewLine;
            }
            // Add selected notes' text to a Task's description
            task.Description += note.Text;
        }
        View.ObjectSpace.CommitChanges();
    }
    
    ```
    
    The  `Execute`  event occurs when a user clicks  **OK**  in the pop-up window. The event handler code appends the  `Note.Text`  property value to the  `Task.Description`  property value.
    
    The event handler’s  [e.PopupWindowViewSelectedObjects](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Actions.PopupWindowShowActionExecuteEventArgs.PopupWindowViewSelectedObjects?v=22.1)  parameter provides an object that a user selects in the pop-up window.
    
8.  Run the application.
    
    Open a  **Task**  item’s Detail View. The Detail View toolbar displays the  **Show Notes**  button. This is the action implemented in this lesson.
    
    ![Blazor tutorial popup window action](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-popupwindowaction-1.png?v=22.1)
    
    Click the button to open the popup window. The popup window displays a list view for the  **Note**  objects. Create several  **Note**  objects.
    
    ![Blazor tutorial popup window action](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-popupwindowaction-2.png?v=22.1)
    
    ![Blazor tutorial popup window action](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-popupwindowaction-3.png?v=22.1)
    
    Select a  **Note**  object in the list and click  **OK**. After that, the  **Task.Description**  property value changes.
    
    ![Pop-up window action](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-popupwindowaction.gif?v=22.1)
    
    >TIP
    For an example of how to create and show a Detail View, refer to the [How to: Create and Show a Detail View of the Selected Object in a Popup Window](https://docs.devexpress.com/eXpressAppFramework/118760/ui-construction/ways-to-access-ui-elements-and-their-controls/how-to-create-and-show-a-detail-view-of-the-selected-object-in-a-popup-window?v=22.1) topic.


# Add an Action with Option Selection (.NET 6)


This lesson explains how to create an Action that supports option selection.

In this lesson, you will implement a new View Controller with a  `SingleChoiceAction`. This action will allow users to select values for the  `Task.Priority`  and  `Task.Status`  properties.

![Blazor tutorial action option selection](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-action-option-selection.png?v=22.1)

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   [Add a Simple Action](https://docs.devexpress.com/eXpressAppFramework/112737/getting-started/in-depth-tutorial-winforms-webforms/extend-functionality/add-a-simple-action?v=22.1)
>-   [Add an Action that Displays a Pop-up Window](https://docs.devexpress.com/eXpressAppFramework/112723/getting-started/in-depth-tutorial-winforms-webforms/extend-functionality/add-an-action-that-displays-a-pop-up-window?v=22.1)

## Step-by-Step Instructions

1.  Add a new View Controller to the  _MySolution.Module_  project. Name it  _TaskActionsController_.
2.  In the  _TaskActionsController.cs_  file, set the controller’s  `TargetObjectType`:
   
    ```csharp
    using DevExpress.ExpressApp;
    // ...
    public partial class TaskActionsController : ViewController {
        public TaskActionsController() {
            InitializeComponent();
            TargetObjectType = typeof(DemoTask);
        }
        // ...
    }
    
    ```
    
3.  Add a  `SingleChoiceAction`  and specify its properties:
   
    ```csharp
    public partial class TaskActionsController : ViewController {
        public TaskActionsController() {
            InitializeComponent();
            TargetObjectType = typeof(DemoTask);
    
            SingleChoiceAction SetTaskAction = new SingleChoiceAction(this, "SetTaskAction", PredefinedCategory.Edit) {
                Caption = "Set Task",
                //Specify the display mode for the Action's items. Here the items are operations that you perform against selected records.
                ItemType = SingleChoiceActionItemType.ItemIsOperation,
                //Set the Action to become available in the Task List View when a user selects one or more objects.
                SelectionDependencyType = SelectionDependencyType.RequireMultipleObjects
            };
        }
        // ...
    }
    
    ```
    
4.  To populate the Action with items, fill the Action’s  [ChoiceActionBase.Items](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Actions.ChoiceActionBase.Items?v=22.1)  collection in the Controller’s constructor:
  
    ```csharp
    public partial class TaskActionsController : ViewController {
       private ChoiceActionItem setPriorityItem;
       private ChoiceActionItem setStatusItem;
       public TaskActionsController() {
          // ...
          setPriorityItem = 
             new ChoiceActionItem(CaptionHelper.GetMemberCaption(typeof(DemoTask), "Priority"), null);
          SetTaskAction.Items.Add(setPriorityItem);
          FillItemWithEnumValues(setPriorityItem, typeof(Priority));
    
          setStatusItem = 
             new ChoiceActionItem(CaptionHelper.GetMemberCaption(typeof(DemoTask), "Status"), null);
          SetTaskAction.Items.Add(setStatusItem);
          FillItemWithEnumValues(setStatusItem, typeof(DevExpress.Persistent.Base.General.TaskStatus));
    
       }
       private void FillItemWithEnumValues(ChoiceActionItem parentItem, Type enumType) {
            EnumDescriptor ed = new EnumDescriptor(enumType);
            foreach(object current in ed.Values) {
                ChoiceActionItem item = new ChoiceActionItem(ed.GetCaption(current), current);
                item.ImageName = ImageLoader.Instance.GetEnumValueImageName(current);
                parentItem.Items.Add(item);
            }
        }
    }
    
    ```
    
    The code sample above organizes items from the Action’s  `Items`  collection as a tree:
    
    -   The root level contains items whose captions correspond to the  `DemoTask.Priority`  and  `DemoTask.Status`  property names. The  [CaptionHelper](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Utils.CaptionHelper?v=22.1)  object returns item captions.
    -   The nested level contains the  `Priority`  and  `Status`  enumeration values. The  [EnumDescriptor](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Utils.EnumDescriptor?v=22.1)  object returns item captions.
    
    ![option selection action tree items](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-option-selection-action-tree-items.png?v=22.1)
    
    When you populate the  [ChoiceActionBase.Items](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Actions.ChoiceActionBase.Items?v=22.1)  collection in a Controller constructor as shown in the code above, you can use the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112830/installation-upgrade-version-history/visual-studio-integration/model-editor?v=22.1)‘s  **ActionDesign** | **Actions** | **_<Action>_**  |  **ChoiceActionItems**  node to set an image name, a shortcut, and a localized caption for the added items.
    
    If you populate the  `Items`  collection in a  [Controller.Activated](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Controller.Activated?v=22.1)  event handler, the Model Editor does not load items.
    
5.  Open the  _Task.cs_  file and assign images to the  `Priority`  enumeration value as in the code sample below:
  
    ```csharp
    public enum Priority {
        [ImageName("State_Priority_Low")]
        Low,
        [ImageName("State_Priority_Normal")]
        Normal,
        [ImageName("State_Priority_High")]
        High
    }
    
    ```
    
    In this tutorial, the enumeration values have the  [ImageNameAttribute](https://docs.devexpress.com/eXpressAppFramework/DevExpress.Persistent.Base.ImageNameAttribute?v=22.1)  attributes to set images for these values in the UI.
    
    XAF ships with the standard image library. The library includes the  `State_Priority_Low`,  `State_Priority_Normal`  and  `State_Priority_High`  images used in this lesson.
    
6.  Handle the  [SingleChoiceAction.Execute](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Actions.SingleChoiceAction.Execute?v=22.1)  event that occurs when a user chooses the Action’s item:
  
    ```csharp
    public partial class TaskActionsController : ViewController {
        // ...
        public TaskActionsController() {
            // ...
            SetTaskAction.Execute += SetTaskAction_Execute;
        }    
        private void SetTaskAction_Execute(object sender, SingleChoiceActionExecuteEventArgs e) {
            /*Create a new ObjectSpace if the Action is used in List View
              Use this ObjectSpace to manipulate the View's selected objects.*/
            IObjectSpace objectSpace = View is ListView ?
                Application.CreateObjectSpace(typeof(DemoTask)) : View.ObjectSpace;
            ArrayList objectsToProcess = new ArrayList(e.SelectedObjects);
            if(e.SelectedChoiceActionItem.ParentItem == setPriorityItem) {
                foreach(Object obj in objectsToProcess) {
                    DemoTask objInNewObjectSpace = (DemoTask)objectSpace.GetObject(obj);
                    objInNewObjectSpace.Priority = (Priority)e.SelectedChoiceActionItem.Data;
                }
            } else
                if(e.SelectedChoiceActionItem.ParentItem == setStatusItem) {
                foreach(Object obj in objectsToProcess) {
                    DemoTask objInNewObjectSpace = (DemoTask)objectSpace.GetObject(obj);
                    objInNewObjectSpace.Status = (DevExpress.Persistent.Base.General.TaskStatus)e.SelectedChoiceActionItem.Data;
                }
            }
            objectSpace.CommitChanges();
            View.ObjectSpace.Refresh();
        }
    }    
    
    ```
    
    To access a selected action item, use the event handler’s  [e.SelectedChoiceActionItem](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Actions.SingleChoiceActionExecuteEventArgs.SelectedChoiceActionItem?v=22.1)  parameter.
    
    Create a separate  `ObjectSpace`  to edit multiple objects that are currently displayed. This approach improves performance, as each object change does not trigger the grid control’s events.
    
7.  Run the application. Select the  **Task**  item in the navigation control. After that, the  **Set Task**  Action becomes active.
    
    To change the  **Priority**  or  **Status**  property of the selected  **Task**  objects, select an item in the Action’s drop-down list:
    
    ![Blazor tutorial action option selection in list view](https://docs.devexpress.com/eXpressAppFramework/images/btutorial_ef_lesson5_3listview.png?v=22.1)
    
    ![Blazor tutorial action option selection in detailed view](https://docs.devexpress.com/eXpressAppFramework/images/btutorial_ef_lesson5_3.png?v=22.1)

# Add a Simple Action using an Attribute

This lesson explains how to use methods of a business object to add a Simple Action.

The instructions below show how to add a new method with the  [ActionAttribute](https://docs.devexpress.com/eXpressAppFramework/DevExpress.Persistent.Base.ActionAttribute?v=22.1)  attribute to the  `DemoTask`  class.

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   **Set a Many-to-Many Relationship** ([XPO](https://docs.devexpress.com/eXpressAppFramework/402168/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/set-a-many-to-many-relationship-xpo?v=22.1)/[EF core](https://docs.devexpress.com/eXpressAppFramework/402983/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/set-a-many-to-many-relationship-ef-core?v=22.1))
>-   [Add a Simple Action](https://docs.devexpress.com/eXpressAppFramework/402157/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-simple-action?v=22.1)

## Step-by-Step Instructions

1.  Add the  `Postpone`  method to the  `DemoTask`  class:
    
    ```csharp
    namespace MySolution.Module.BusinessObjects
    
    [DefaultClassOptions]
    [ModelDefault("Caption", "Task")]
    public class DemoTask : DevExpress.Persistent.BaseImpl.EF.Task {
        //...
        /*Use this attribute to display the Postpone button in the UI
        and call the Postpone() method when a user clicks this button*/
        [Action(ToolTip = "Postpone the task to the next day")]
        //Shift the task's due date forward by one day
        public void Postpone() {
            if(DueDate == DateTime.MinValue) {
                DueDate = DateTime.Now;
            }
            DueDate = DueDate + TimeSpan.FromDays(1);
        }
    }
    
    ```
    
    >TIP
    You can use the `Action` attribute to implement an action that asks a user to specify parameters in a popup dialog (for example, the number of days to postpone a **Task**). Refer to the following topic for an example: [How to: Create an Action Using the Action Attribute](https://docs.devexpress.com/eXpressAppFramework/112619/ui-construction/controllers-and-actions/actions/how-to-create-an-action-using-the-action-attribute?v=22.1).
    
2.  Display the  **Due Date**  column in the  **Task**  List View. Open the  **MySolution.Module**  |  **ModelDesignedDiffs.xafml**  file. In the Model Editor, do the following:
    
    -   Go to  **Views | MySolution.Module.BusinessObjects | DemoTask | DemoTask_ListView | Columns**.
    -   Right-click the grid header and click the  **Column Chooser**  item.
    -   Drag the  **Due Date**  column to the View and save the  **ModelDesignedDiffs.xafml**  file.
        
        ![Blazor tutorial display column listview](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-attribute-action-displaycolumn.gif?v=22.1)
        
3.  Run the application. Select the  **Task**  item in the navigation control.
    
    Select one or more tasks in the  **Task**  List View. The  **Postpone**  Action button appears. Click this button. The due date of the selected tasks shifts forward by one day.

# Access the Settings of a Property Editor in a Detail View


This lesson explains how to access editors in a  [Detail View](https://docs.devexpress.com/eXpressAppFramework/112611/ui-construction/views?v=22.1)  and change their settings.

The instructions below show how to make the  **Birthday**  property editor display a scrollable date picker in its drop-down window.

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   **Inherit from the Business Class Library Class** ([XPO](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1)/[EF core](https://docs.devexpress.com/eXpressAppFramework/402981/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/inherit-from-the-business-class-library-class-ef-core?v=22.1))
>-   [Add a Simple Action](https://docs.devexpress.com/eXpressAppFramework/402157/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-simple-action?v=22.1)

## Step-by-Step Instructions

1.  In the  **MySolution.Blazor.Server**  project, add a View Controller to the  _Controllers_  folder. Name the new controller “_DateEditCalendarController_“. Specify the controller ancestor class  [ObjectViewController<ViewType, ObjectType>](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.ObjectViewController-2?v=22.1):
 
    ```csharp
    using DevExpress.ExpressApp;
    // ...
    
    public partial class DateEditCalendarController : ObjectViewController<DetailView, Contact> {
        public DateEditCalendarController() {
            InitializeComponent();
        }
        // ...
    }
    
    ```
    
    The  `DateEditCalendarController`  inherits from the  [ObjectViewController<ViewType, ObjectType>](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.ObjectViewController-2?v=22.1)  base class. The parameters of the base class enable the Controller only for Detail Views that display and edit  `Contact`  objects.
    
2.  Override the  `OnActivated`  method. Use the  [DetailViewExtensions.CustomizeViewItemControl](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.DetailViewExtensions.CustomizeViewItemControl--1(DevExpress.ExpressApp.DetailView-DevExpress.ExpressApp.Controller-System.Action---0--System.String--)?v=22.1)  method to access the  `Birthday`  property editor settings:
  
    ```csharp
    namespace MySolution.Blazor.Server.Controllers {
        public partial class DateEditCalendarController : ObjectViewController<DetailView, Contact> {
            public DateEditCalendarController() {
                InitializeComponent();
            }
            protected override void OnActivated() {
                base.OnActivated();
                //Access the Birthday property editor settings
                View.CustomizeViewItemControl<DateTimePropertyEditor>(this, SetCalendarView, nameof(Contact.Birthday));
            }
            private void SetCalendarView(DateTimePropertyEditor propertyEditor) {
                //Obtain the Component Adapter
                var dateEditAdapter = (DxDateEditAdapter)propertyEditor.Control;
                //Set the date picker display mode to scroll picker
                dateEditAdapter.ComponentModel.PickerDisplayMode = DevExpress.Blazor.DatePickerDisplayMode.ScrollPicker;
            }
        }
    }
    
    ```
    
    Use the  **Component Adapter**‘s  `ComponentModel`  property to access the actual  [ASP.NET Core Blazor component properties](https://docs.devexpress.com/eXpressAppFramework/113536/business-model-design-orm/data-types-supported-by-built-in-editors/date-and-time-properties?v=22.1#aspnet-core-blazor).
    
    For general information on Property Editor architecture and UI Controls used by XAF, review the following articles:
    
    -   [Implement a Property Editor Based on a Custom Component (Blazor)](https://docs.devexpress.com/eXpressAppFramework/402189/ui-construction/view-items-and-property-editors/property-editors/implement-a-property-editor-based-on-custom-components-blazor?v=22.1)
    -   [Data Types Supported by built-in Editors](https://docs.devexpress.com/eXpressAppFramework/113014/business-model-design-orm/data-types-supported-by-built-in-editors?v=22.1)
3.  Run the application and open the  **Contact**  Detail View. The  **Birthday**  editor shows a scrollable date picker in its drop-down window:
    
    ![ ASP.NET Core Blazor access editor settings change editor null text](https://docs.devexpress.com/eXpressAppFramework/images/btutorial_ef_access_editor_setttings.png?v=22.1)

# Access the Grid Component in a List View (.NET 6)

This lesson explains how to access the properties of a grid component displayed within a List View.

The instructions below describe the implementation of a new View Controller. This controller enables operations to resize columns.

>NOTE
Before you proceed, take a moment to review the following lesson:
>-   [Add a Simple Action](https://docs.devexpress.com/eXpressAppFramework/402157/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-simple-action?v=22.1)

## Step-by-Step Instructions

1.  In the  **MySolution.Blazor.Server**  project, add a View Controller to the  _Controllers_  folder. Name this controller  _ColumnResizeModeViewController_.
2.  Specify the controller’s ancestor class  `ViewController<ListView>`  and override the  `OnViewControlsCreated`  method:
 
    ```csharp
    using DevExpress.ExpressApp;
    using DevExpress.ExpressApp.Blazor.Editors;
    
    namespace MySolution.Blazor.Server.Controllers {
        public partial class ColumnResizeModeViewController : ViewController<ListView> {
            public ColumnResizeModeViewController() {
                InitializeComponent();
            }
            // ...
            protected override void OnViewControlsCreated() {
                base.OnViewControlsCreated();
                if (View.Editor is DxGridListEditor gridListEditor) {
                    //Obtain the Component Adapter
                    IDxGridAdapter dataGridAdapter = gridListEditor.GetGridAdapter();
                    //Access grid component properties and specify how exactly a user can resize columns
                    dataGridAdapter.GridModel.ColumnResizeMode = DevExpress.Blazor.GridColumnResizeMode.ColumnsContainer;
                }
            }
            // ...
        }
    }
    
    ```
    
3.  Run the application. Try to resize a column in a grid component in any List View. The width of the grid container changes, while the other columns retain their width.
    
    ![XAF ASP.NET Core Blazor access grid properties resize| ](https://docs.devexpress.com/eXpressAppFramework/images/blazor-access-grid-properties.gif?v=22.1)
    


# UI Customization

This tutorial section explains how to customize the automatically generated user interface.

Visual elements in your XAF application are based on the data classes that you declare and the information from the assemblies that your application references. All the received information is metadata - data that defines database structure and application features in a neutral format that you can adopt to any target platform. This metadata is called the  [Application Model](https://docs.devexpress.com/eXpressAppFramework/112579/ui-construction/application-model-ui-settings-storage?v=22.1). It is a powerful tool that allows you to make changes to your application.

To customize the  **Application Model**  at design time, use the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1). It opens directly from Visual Studio.

The following lessons explain how to use the  **Model Editor**:

-   [Place an Action in a Different Location](https://docs.devexpress.com/eXpressAppFramework/402145/getting-started/in-depth-tutorial-blazor/ui-customization/place-an-action-in-a-different-location?v=22.1)
-   [Specify Action Settings](https://docs.devexpress.com/eXpressAppFramework/402146/getting-started/in-depth-tutorial-blazor/ui-customization/specify-action-settings?v=22.1)
-   [Format a Business Object Caption](https://docs.devexpress.com/eXpressAppFramework/402140/getting-started/in-depth-tutorial-blazor/ui-customization/format-a-business-object-caption?v=22.1)
-   [Create a Calculated Property](https://docs.devexpress.com/eXpressAppFramework/402144/getting-started/in-depth-tutorial-blazor/ui-customization/create-calculated-property?v=22.1)
-   [Format a Property Value](https://docs.devexpress.com/eXpressAppFramework/402141/getting-started/in-depth-tutorial-blazor/ui-customization/format-a-property-value?v=22.1)
-   [Use a Multiline Editor for String Properties](https://docs.devexpress.com/eXpressAppFramework/402147/getting-started/in-depth-tutorial-blazor/ui-customization/use-a-multiline-editor-for-string-properties?v=22.1)
-   [Add an Item to the Navigation Control](https://docs.devexpress.com/eXpressAppFramework/402131/getting-started/in-depth-tutorial-blazor/ui-customization/add-an-item-to-the-navigation-control?v=22.1)
-   [Implement Property Value Validation in the Application Model](https://docs.devexpress.com/eXpressAppFramework/402142/getting-started/in-depth-tutorial-blazor/ui-customization/implement-property-value-validation-in-the-application-model?v=22.1)
-   [Customize the View Items Layout](https://docs.devexpress.com/eXpressAppFramework/402137/getting-started/in-depth-tutorial-blazor/ui-customization/customize-the-view-items-layout?v=22.1)
-   [Localize UI Elements](https://docs.devexpress.com/eXpressAppFramework/403184/getting-started/in-depth-tutorial-blazor/ui-customization/localize-ui-elements?v=22.1)
-   [Add an Editor to a Detail View](https://docs.devexpress.com/eXpressAppFramework/403217/getting-started/in-depth-tutorial-blazor/ui-customization/add-an-editor-to-a-detail-view?v=22.1)
-   [Change Field Visibility in a List View](https://docs.devexpress.com/eXpressAppFramework/403230/getting-started/in-depth-tutorial-blazor/ui-customization/change-field-visibility-in-a-list-view?v=22.1)
-   [Filter List Views](https://docs.devexpress.com/eXpressAppFramework/403238/getting-started/in-depth-tutorial-blazor/ui-customization/change-list-view-filters?v=22.1)
-   [Group List View Data](https://docs.devexpress.com/eXpressAppFramework/403248/getting-started/in-depth-tutorial-blazor/ui-customization/group-list-view-data?v=22.1)

If the required option is not available in the Model Editor, you can directly access the options of controls used in the application. Review the following topics to learn more:

-   [Access Editor Settings](https://docs.devexpress.com/eXpressAppFramework/402153/getting-started/in-depth-tutorial-blazor/extend-functionality/access-editor-settings?v=22.1)
-   [Access List View Grid Component Settings Using a Controller](https://docs.devexpress.com/eXpressAppFramework/402154/getting-started/in-depth-tutorial-blazor/extend-functionality/access-data-grid-settings?v=22.1)

# Place an Action in a Different Location


This lesson explains how to move an  [Action](https://docs.devexpress.com/eXpressAppFramework/112622/ui-construction/controllers-and-actions/actions?v=22.1)  to a different  [Action Container](https://docs.devexpress.com/eXpressAppFramework/112610/ui-construction/action-containers?v=22.1).

An Action Container is a control that displays an action or a set of actions.

The instructions below explain how to move the  `ClearTasksAction`  from the  **View**  Action Container to the  **Edit**  Action Container.

![Current location and target location of the Clear Tasks button](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-rearrange-action-buttons.png?v=22.1)

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   [Add a Simple Action](https://docs.devexpress.com/eXpressAppFramework/402157/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-simple-action?v=22.1)
>-   [Add an Action that Displays a Pop-up Window](https://docs.devexpress.com/eXpressAppFramework/402158/getting-started/in-depth-tutorial-blazor/extend-functionality/add-an-action-that-displays-a-pop-up-window?v=22.1)

## Step-by-Step Instructions

1.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1).
2.  In the  **Model Editor**, navigate to the  **ActionDesign**  |  **ActionToContainerMapping**  node. Expand the  **View**  node that is the  **View**  Action Container. Drag the  **ClearTasksAction**  child node to the  **Edit**  node. Set the node’s  **Index**  to  `0`.
    
    ![Rearrangement of Actions in Model Editor](https://docs.devexpress.com/eXpressAppFramework/images/blazor-rearrange-actions.gif?v=22.1)
    
    Child nodes of the  **ActionToContainerMapping**  node correspond to Action Containers of your application. The Actions are mapped to Action Containers according to the  [Category](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Actions.ActionBase.Category?v=22.1)  property values.
    
    When you defined the  `ClearTasksAction`  in the  [Add a Simple Action](https://docs.devexpress.com/eXpressAppFramework/402157/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-simple-action?v=22.1)  lesson, you set the  [Category](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Actions.ActionBase.Category?v=22.1)  property to  `View`.  `View`  is a value from the  `DevExpress.Persistent.Base.PredefinedCategory`  enumeration that corresponds to the  **View**  Action Container.
    
3.  Run the application. In the  **Contact**  detail view, the  **Clear Task**  button appears to the left of the  **Delete**  button.
    
    ![New location of the Clear Tasks button](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-rearrange-actions.png?v=22.1)
    

>TIP
You can handle the [ActionControlsSiteController.CustomizeContainerActions](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.SystemModule.ActionControlsSiteController.CustomizeContainerActions?v=22.1) event to change an Action location in code.

# Specify Action Settings

This lesson explains how to modify Action properties.

The instructions below explain how to change the tooltip and confirmation message for  **ClearTasksAction**. You defined this action in the  [Add a Simple Action](https://docs.devexpress.com/eXpressAppFramework/402157/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-simple-action?v=22.1)  lesson.

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   [Add a Simple Action](https://docs.devexpress.com/eXpressAppFramework/402157/getting-started/in-depth-tutorial-blazor/extend-functionality/add-a-simple-action?v=22.1)
>-   [Place an Action in a Different Location](https://docs.devexpress.com/eXpressAppFramework/402145/getting-started/in-depth-tutorial-blazor/ui-customization/place-an-action-in-a-different-location?v=22.1)

## Step-by-Step Instructions

1.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1).
2.  In the  **Model Editor**, navigate to the  **ActionDesign**  |  **Actions**  node. Change the  **ClearTasksAction**  node’s property values as follows:
    
    -   Set the  **Tooltip**  property to  `Clear the current Contact's tasks`.
    -   Set the  **ConfirmationMessage**  property to  `Are you sure you want to clear all the tasks?`.
3.  Run the application and open the  **Contact**  Detail View. Hover the mouse pointer over the  **Clear Tasks**  button to see the tooltip.
    
    ![Clear Tasks button's new tooltip](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-action-settings.png?v=22.1)
    
4.  Click the button to show the confirmation message.
    
    ![New confirmation message for ClearTasksAction](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-action-settings-messagebox.png?v=22.1)

# Format a Business Object Caption


This lesson explains how to format a caption of a business object’s detail form.

![Current Detail View caption in Blazor UI](https://docs.devexpress.com/eXpressAppFramework/images/blazor_tutorial_BO-caption.png?v=22.1)

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   Inherit from the Business Class Library Class ([XPO](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1)/[EF core](https://docs.devexpress.com/eXpressAppFramework/402981/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/inherit-from-the-business-class-library-class-ef-core?v=22.1))
>-   [Place an Action in a Different Location](https://docs.devexpress.com/eXpressAppFramework/402145/getting-started/in-depth-tutorial-blazor/ui-customization/place-an-action-in-a-different-location?v=22.1)

## Step-by-Step Instructions

1.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1).
2.  In the  **Model Editor**, navigate to the  **BOModel**  |  **MySolution.Module.BusinessObjects**  node. Select the  **Contact**  node.
3.  Set the  **ObjectCaptionFormat**  property value to  `{0:FullName} from {0:Department}`  in the class properties shown on the right.
    
    ![ObjectCaptionFormat property in Model Editor](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-format-bo-caption.png?v=22.1)
    
4.  Run the application. Open the detail form for a  **Contact**  object. You can now see the custom caption:
    
    ![New Detail View caption in Blazor UI](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-format-bo-caption-result.png?v=22.1)

# Create a Calculated Property


This lesson explains how to create calculated properties.

The instructions below explain how to add a  **Payment**  class with the following properties:

-   **Rate**  (a persistent property)
-   **Hours**  (a persistent property)
-   **Amount**  (a  [non-persistent](https://docs.devexpress.com/eXpressAppFramework/116516/business-model-design-orm/non-persistent-objects?v=22.1), calculated property:  `Amount = Rate * Hours`)

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   **Inherit from the Business Class Library Class** ([XPO](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1)/[EF core](https://docs.devexpress.com/eXpressAppFramework/402981/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/inherit-from-the-business-class-library-class-ef-core?v=22.1))
>-   [Place an Action in a Different Location](https://docs.devexpress.com/eXpressAppFramework/112741/getting-started/in-depth-tutorial-winforms-webforms/ui-customization/place-an-action-in-a-different-location?v=22.1)

## Step-by-Step Instructions

1.  Create a  `Payment`  business object in the  _MySolution.Module_  project.
2.  Replace the generated class declaration with the following code:

    
    ```csharp
    using DevExpress.Persistent.Base;
    using DevExpress.Persistent.BaseImpl;
    using DevExpress.Xpo;
    // ...
    [DefaultClassOptions]
    public class Payment : BaseObject {
        public Payment(Session session) : base(session) { }
        private double rate;
        public double Rate {
            get {
                return rate;
            }
            set {
                if(SetPropertyValue(nameof(Rate), ref rate, value))
                    OnChanged(nameof(Amount));
            }
        }
        private double hours;
        public double Hours {
            get {
                return hours;
            }
            set {
                if(SetPropertyValue(nameof(Hours), ref hours, value))
                    OnChanged(nameof(Amount));
            }
        }
        /*Use this attribute to specify that the value of this property depends on the values of other fields.
          The expression that you pass as a parameter calculates the property value.*/
        [PersistentAlias("Rate * Hours")]
        public double Amount {
            get { return (double)(EvaluateAlias(nameof(Amount)) ?? 0); }
        }
    }
    
    ```
    
    The  `Amount`  property has no  `set`  accessor. Its value calculation takes place in the  `get`  accessor.
    
3.  For EF Core-based applications, register the  `Payment`  type in the  `DbContext`:

    
    ```csharp
    public class MySolutionEFCoreDbContext : DbContext {
        //...
        public DbSet<Payment> Payments { get; set; }
    }
    
    ```
    
4.  For EF Core-based applications, add a migration and update the database. See the following section for details:  [Use a DBMS: Setup Migrations](https://docs.devexpress.com/eXpressAppFramework/404144/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/create-a-solution-ef-core?v=22.1#use-a-dbms-setup-migrations).
    
5.  Run the application. Select the  **Payment**  item in the navigation control, and click “New”. In the  **Payment**  Detail View, change the  **Rate**  and  **Hours**  properties to see how this affects the  **Amount**  property.
    
    ![xaf ASP.NET Core Blazor calculable property](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-calculable-property.gif?v=22.1)
    


# Format a Property Value


This lesson explains how to format a business class property and specify its  [input mask](https://docs.devexpress.com/WindowsForms/583/controls-and-libraries/editors-and-simple-controls/common-editor-features-and-concepts/input-mask?v=22.1)  settings.

In this lesson, you will customize the display format for the  `Task.StartDate`,  `Task.DueDate`, and  `Task.PercentCompleted`  properties in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1).

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   Inherit from the Business Class Library Class ([XPO](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1)/[EF core](https://docs.devexpress.com/eXpressAppFramework/402981/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/inherit-from-the-business-class-library-class-ef-core?v=22.1))
>-   [Place an Action in a Different Location](https://docs.devexpress.com/eXpressAppFramework/402145/getting-started/in-depth-tutorial-blazor/ui-customization/place-an-action-in-a-different-location?v=22.1)

## Step-by-Step Instructions

1.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1).
2.  Navigate to the  **BOModel**  |  **DevExpress.Persistent.BaseImpl.EF**  |  **Task**  |  **OwnMembers**  node.
3.  For the  **DueDate**  and  **StartDate**  child nodes, set the value of the  [DisplayFormat](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Editors.PropertyEditor.DisplayFormat?v=22.1)  property to  `D`  - a long date pattern.
    
    ![XAF ASP.NET Core Blazor date time mask display format](https://docs.devexpress.com/eXpressAppFramework/images/tutorial_uic_datetime_mask.png?v=22.1)
    
    Note that the value of the  **EditMask**  property is  `d`  - a short day pattern.
    
4.  For the  **PercentCompleted**  child node, set the  **DisplayFormat**  property to  `{0:N0}%`.
    
    ![XAF ASP.NET Core Blazor percent integer display format](https://docs.devexpress.com/eXpressAppFramework/images/tutorial_uic_integer_display_format.png?v=22.1)
    
5.  Run the application. Invoke a Detail List for the  **DemoTask**  class.
    
    ![Tutorial_UIC_Lesson8_5](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-editmask-display-format.gif?v=22.1)
    
    Note how text format changes when  **StartDate**  and  **DueDate**  editors receive or lose focus. If you focus an editor, its  **EditMask**  takes effect (`d`  - short date pattern). If an editor loses input focus, its  **DisplayFormat**  takes over (`D`  - long date pattern).
    
    The  **PercentCompleted**  display text includes the percentage sign: ‘%’.
    

>NOTE
In .NET 5, the libraries used for globalization functionality has been changed. Refer to the following topic for details: [Globalization APIs use ICU libraries on Windows](https://docs.microsoft.com/en-us/dotnet/core/compatibility/globalization/5.0/icu-globalization-api).
If a current thread’s culture is set to a culture that includes only the language and not the country (for example, “de” or “en”), the currency symbol renders as an international currency symbol (`¤`), for example: `100,00 ¤`.
Refer to the following topics for details:
>-   [ICU Localization - Currency symbol](https://docs.microsoft.com/en-us/dotnet/core/compatibility/globalization/5.0/icu-globalization-api#currency-symbol).
>-   [CurrencySymbol](https://docs.microsoft.com/dotnet/api/system.globalization.numberformatinfo.currencysymbol#System_Globalization_NumberFormatInfo_CurrencySymbol).

# Use a Multiline Editor for String Properties


This lesson explains how to display a multiline editor for string properties.

The instructions below explain how to enable a multiline text box for the  **Web Page Address**  property editor in the  **Contact**  Detail View.

## Step-by-Step Instructions

1.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1).
2.  Navigate to the  **BOModel**  |  **MySolutuon.Module.BusinessObjects**  |  **Contact**  |  **OwnMembers**  node.
3.  For the  **WebPageAddress**  child node, set the properties as follows:
    
    -   Set the  **RowCount**  property to  `2`.
        
        This creates a two-line editor for the  **WebPageAddress**  property.
        
    -   Set the  **Size**  property to  `100`.
        
        This allows a user to enter up to 100 symbols.
        
        You can also apply the  [FieldSize](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.DC.FieldSizeAttribute?v=22.1)  attribute in code.
        
    
    ![XAF ASP.NET Core Blazor multiline text box](https://docs.devexpress.com/eXpressAppFramework/images/tutorial_uic_multiline_textedit.png?v=22.1)
    
4.  Run the application. Open a Detail List for a  **Contact**  object. The  **Web Page Address**  property uses a two-line text box editor.
    
    ![XAF ASP.NET Core Blazor multiline text box](https://docs.devexpress.com/eXpressAppFramework/images/blazor_tutorial_uic_multiline_text.png?v=22.1)

# Add an Item to the Navigation Control

This lesson explains how to add an item to the navigation control.

The instructions below describe how to add the  **Notes**  item to the navigation control. When a user clicks this item, the application displays a List View for the  **Note**  business class added in the following lesson:  [Add an Action that Displays a Pop-Up Window](https://docs.devexpress.com/eXpressAppFramework/402158/getting-started/in-depth-tutorial-blazor/extend-functionality/add-an-action-that-displays-a-pop-up-window?v=22.1).

![XAF ASP.NET Core Blazor add navbar item](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-add-navigation-item-notes.png?v=22.1)

## Step-by-Step Instructions

1.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1). In the tree view, navigate to the  **NavigationItems** | **Items** | **Default** | **Items**  node. To add a child item to a navigation item, right-click the  **Items**  node and select  **Add…**  |  **NavigationItem**  in the context menu:
    
    ![XAF ASP.NET Core Blazor add navigation item](https://docs.devexpress.com/eXpressAppFramework/images/blazor_tutorial_uic_add_navigation_item.png?v=22.1)
    
2.  Specify the following properties for the new item:
    
    -   Set the  **View**  property to  `Note_ListView`.
    -   Set the  **Caption**  property to  `Notes`.
    -   Set the  **Id**  property to  `Note`.
    
    ![Navigation item properties](https://docs.devexpress.com/eXpressAppFramework/images/blazor_tutorial_add_navgation_item_properties.png?v=22.1)
    
3.  Run the application. You can see the new navigation item that allows you to add and edit plain text notes.
    
    ![XAF ASP.NET Core Blazor add navigation item](https://docs.devexpress.com/eXpressAppFramework/images/blazor_tutorial_add_navigation_item_result.png?v=22.1)

# Implement Property Value Validation in the Application Model

This lesson explains how to check whether a property value meets a predefined criteria. This functionality becomes available if you install the  **Validation Module**.

The instructions below explain how to prevent a user from marking a task as completed before the task has started (`DemoTask.Status`  is  `NotStarted`).

>NOTE
Before you proceed, take a moment to review the following lesson:
>-   Implement Property Value Validation in Code ([XPO](https://docs.devexpress.com/eXpressAppFramework/402165/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/implement-property-value-validation-in-code-xpo?v=22.1)/[EF core](https://docs.devexpress.com/eXpressAppFramework/402980/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/implement-property-value-validation-in-code-ef-core?v=22.1))

## Step-by-Step Instructions

1.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1). Navigate to the  **Validation**  |  **Rules**  node. Add a new validation rule: right-click the  **Rules**  node and select  **Add…**  |  **RuleCriteria**.
    
    ![XAF ASP.NET Core Blazor validation in model editor](https://docs.devexpress.com/eXpressAppFramework/images/blazor_tutorial_uic_validation.png?v=22.1)
    
2.  Set the values of the following properties for the node:
    
    -   **TargetType**  to “MySolution.Module.BusinessObjects.DemoTask”
    -   **Criteria**  to  `Status != 'NotStarted'`
    -   **ID**  to  `TaskStarted`
    -   **TargetContextIDs**  to  `MarkCompleted`
    -   **CustomMessageTemplate**  to  `Cannot set the task as completed because it has not started.`
    
    ![XAF ASP.NET Core Blazor validation in model editor](https://docs.devexpress.com/eXpressAppFramework/images/blazor_tutorial_uic_validation_settings.png?v=22.1)
    
    The  **Criteria**  property value must respect the  [Criteria Language Syntax](https://docs.devexpress.com/CoreLibraries/4928/devexpress-data-library/criteria-language-syntax?v=22.1). To set the criteria, click the ellipsis button (![EllipsisButton](https://docs.devexpress.com/eXpressAppFramework/images/ellipsisbutton116182.png?v=22.1)) to the right of the  **Criteria**  value and invoke the  **Filter Builder**  dialog. In this dialog, you can visually design a criteria expression.
    
3.  In the  **ActionDesign**  |  **Actions**  |  **Task.MarkCompleted**  node, set the  **ValidationContexts**  property to  `MarkCompleted`.
    
    ![Tutorial_UIC_Lesson14_2_1](https://docs.devexpress.com/eXpressAppFramework/images/blazor_tutorial_uic_validation_context.png?v=22.1)
    
    >TIP
    You can use the **Save** or **Delete** contexts. The validation of Rules with these contexts occurs when a user saves or deletes an object (see [Validation Rules](https://docs.devexpress.com/eXpressAppFramework/113008/validation/validation-rules?v=22.1)).
    
4.  Change the caption of the  **MarkCompleted**  Action to  `Mark Completed`.
    
5.  Run the application. Assign the “Not Started” value to the  **Status**  property of one of the existing  **DemoTask**  objects. Click the  **Mark Completed**  button. The following  **Validation Error**  dialog appears:
    
    ![XAF ASP.NET Core Blazor validation error message](https://docs.devexpress.com/eXpressAppFramework/images/blazor_tutorial_uic_validation_error_message.png?v=22.1)
    

You can also add a rule to a class or property in code. For additional information, refer to the following topic:  [Implement Property Value Validation in Code (XPO)](https://docs.devexpress.com/eXpressAppFramework/402165/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/implement-property-value-validation-in-code-xpo?v=22.1).

The following topic lists all available rule types and their descriptions:  [Validation Rules](https://docs.devexpress.com/eXpressAppFramework/113008/validation/validation-rules?v=22.1).

# Customize the View Items Layout


This lesson explains how to customize the default editor layout in a Detail View. The instructions below use the Contact Detail View as an example.

## Step-by-Step Instructions

1.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1).
2.  Navigate to the  **Views**  |  **MySolution.Module.BusinessObjects**  |  **Contact**  |  **Contact_DetailView**  |  **Layout**  node.
3.  The Model Editor displays a design surface that imitates the Contact Detail View. To change the editor layout, right-click the View’s empty space and choose  **Customize Layout**.
    
    ![Customize Layout context menu](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-customize-layout-context-menu.png?v=22.1)
    
    The  **Customization**  form allows you to add, remove, and reorder items.
    
    -   To remove an item, drag it from the Detail View to the  **Customization Form**.
    -   To add an item, drag it from the  **Customization Form**  to the  **Detail View**.
    -   To reorder items, drag editors to create a new layout and save changes.
        
        ![XAF ASP.NET Core Blazor customize edit form layout](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-customize-layout-dragndrop.gif?v=22.1)
        
    
    For more information about the  **Customization**  form and the  **Layout Tree View**  tab and its context menu, refer to the  [Default Runtime Customization](https://docs.devexpress.com/WindowsForms/2307/controls-and-libraries/form-layout-managers/layout-and-data-layout-controls/design-time-and-runtime-customization/default-runtime-customization?v=22.1)  topic.
    
4.  Explore additional layout customization options available in the context menu. Click the  **Layout Tree View**  tab on the  **Customization Form**. Right-click a tree node to invoke a context menu.
    
    ![Customization form context menu](https://docs.devexpress.com/eXpressAppFramework/images/blazor_tutorial_customize_layout_ungroup.png?v=22.1)
    
5.  Run the application to see the  **Contact**  Detail View’s new layout.
    
    ![XAF ASP.NET Core Blazor customize edit form layout](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-customize-layout-result.png?v=22.1)
    

>TIP
To reset changes you made to the layout, right-click **Contact_DetailView** | **Layout** and choose **Reset Differences**.

# Localize UI Elements


This lesson explains how to localize an XAF ASP.NET Core Blazor application. It describes how to translate UI elements into German and create a multi-language application.

>NOTE
For more information on localization, review the following topics:
>-   [How to: Localize an XAF .NET 6 Application](https://docs.devexpress.com/eXpressAppFramework/402956/localization/localize-an-xaf-net6-application?v=22.1)
>-   [Localization Basics](https://docs.devexpress.com/eXpressAppFramework/112595/localization/localization-basics?v=22.1)

## Step-by-Step Instructions

1.  [Add](https://docs.microsoft.com/en-us/nuget/consume-packages/install-use-packages-visual-studio)  the  _DevExpress.ExpressApp.de_,  _DevExpress.ExpressApp.Blazor.de_, and  _DevExpress.ExpressApp.Security.de_  packages to the  **MySolution.Blazor.Server**  project.
    
    ![Install DevExpress.ExpressApp.de nuget package](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-localize-ui-elements-nuget.png?v=22.1)
    
    The packages are available only for the following languages: German (de), Spanish (es), and Japanese (ja). For other languages, use the  [Localization Service](https://docs.devexpress.com/LocalizationService/16235/localization-service?v=22.1)  to download satellite assemblies. See the  [Localize Standard XAF Modules and DevExpress Controls Used in an Application](https://docs.devexpress.com/eXpressAppFramework/113301/localization/localize-standard-xaf-modules-and-devexpress-controls-used-in-an-application?v=22.1)  topic for more information on how to use this service to localize XAF modules.
    
2.  In the  **MySolution.Blazor.Server**  project, open the  _appsettings.json_  file. Add the German language to the  _DevExpress:ExpressApp:Languages_  section and enable the  [runtime language switcher](https://docs.devexpress.com/eXpressAppFramework/403027/localization/runtime-language-switcher?v=22.1):

    
    ```json
    { 
        // ... 
        "DevExpress": { 
            "ExpressApp": { 
                "Languages": "en;de",
                "ShowLanguageSwitcher": true,  
                 // ...
            } 
        } 
    }  
    
    ```
    
    See the  [Current Culture in XAF ASP.NET Core Blazor Applications](https://docs.devexpress.com/eXpressAppFramework/402956/localization/localize-an-xaf-net6-application?v=22.1#current-culture-in-xaf-aspnet-core-blazor-applications)  help section for more information on how an XAF ASP.NET Core Blazor application determines the default language.
    
3.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1). Focus the  _MySolution_  node and click  **Languages Manager…**  in the  **Language**  combo box on the  [Model Editor Toolbar](https://docs.devexpress.com/eXpressAppFramework/113327/ui-construction/application-model-ui-settings-storage/model-editor/menu-toolbars?v=22.1).
    
    ![Run language manager](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-run-languages-manager.png?v=22.1)
    
4.  Add the target language in the invoked dialog and click  **OK**.
    
    ![The language manager](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-languages-manager.png?v=22.1)
    
5.  Restart Visual Studio to load localized values from satellite assemblies.
    
6.  In the Solution Explorer, right-click the  _Model.DesignedDiffs.Localization.de.xafml_  file and open its  **Properties**  window. Make sure that the  **Build Action**  field is set to  **Embedded resource**.
    
7.  Select the newly added language in the  **Language**  combo box.
    
    ![Select language](https://docs.devexpress.com/eXpressAppFramework/images/tutorial_uic_lesson11_0_1115628.png?v=22.1)
    
8.  The localization packages translate standard strings/messages used in XAF. You also need to translate the strings that are unique to your current application (such as object or property names). To do that, locate properties denoted by the “globe” glyph in all the nodes and child nodes and assign a German translation to them.
    
    ![Localize captions](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-localize-captions.png?v=22.1)
    
9.  Run the application. Click the gear icon to display the settings menu and switch the language to German.
    
    ![Language Switcher](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-lang-switcher.png?v=22.1)
    
10.  Check whether you translated all required items.
![Localize captions](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-localized-app.png?v=22.1)

# Display a Nested Property Editor in a Detail View


This lesson explains how to make a property (its editor) visible in a  [Detail View](https://docs.devexpress.com/eXpressAppFramework/112611/ui-construction/views?v=22.1). The instructions below show how to locate the  **Department.Office**  nested property and make it visible in the  **Contact**  Detail View.

>NOTE
Before you proceed, take a moment to review the following lesson:
>-   [Place an Action in a Different Location](https://docs.devexpress.com/eXpressAppFramework/402145/getting-started/in-depth-tutorial-blazor/ui-customization/place-an-action-in-a-different-location?v=22.1)

## Step-by-Step Instructions

1.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1).
    
2.  Navigate to the  **Views**  |  **MySolution.Module.BusinessObjects**  |  **Contact**  node. Expand the  **Contact_DetailView**  child node and click the  **Layout**  node.
    
3.  The Model Editor displays a design surface that imitates the  **Contact**  Detail View. Right-click the View’s empty space and choose  **Customize Layout**.
    
    ![Start layout customization](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-customize-layout-context-menu.png?v=22.1)
    
4.  In the invoked  **Customization**  window, click the  **Add**  button.
    
    ![Customization Window](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-customization-window.png?v=22.1)
    
5.  In the  **Object Model**  dialog, expand the  **Department**  node, check the  **Office**  checkbox, and click  **OK**.
    
    ![Object Model Window](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-object-model-window.png?v=22.1)
    
6.  The  **Office:**  item appears on the  **Hidden Items**  tab of the  **Customization**  window:
    
    ![A new field is added to the Object Model Window](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-customization-window-new-field.png?v=22.1)
    
7.  Drag the  **Office:**  item to the required position of the  **Contact**  Detail View.
    
    ![Add Layout Item Department.Office](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-add-property-layout.gif?v=22.1)
    

8.  Run the application, open the  **Contact**  Detail View, and find the  **Office**  editor:
    
    ![The new editor in the Detail View](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-add-property-editor-result.png?v=22.1)

# Change Field Visibility in a List View

This lesson explains how to select columns displayed in a List View. The steps below describe how to customize the  **Contact**  List View at design time.

>NOTE
Before you proceed, take a moment to review the following lesson:
>-   [Place an Action in a Different Location](https://docs.devexpress.com/eXpressAppFramework/402145/getting-started/in-depth-tutorial-blazor/ui-customization/place-an-action-in-a-different-location?v=22.1)

## Step-by-Step Instructions

1.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1).
    
2.  Click the  **Views**  |  **MySolution.Module.BusinessObjects**  |  **Contact_ListView**  |  **Columns**  node to open the  **Grid List Editor Designer**. Right-click the table header and select  **Column Chooser**.
    
    ![Display Column Chooser](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-change-field-layout.png?v=22.1)
    
3.  Drag items to and from the  **Customization**  window to display the following columns in the List View:  _FullName_,  _Department_,  _Position_, and  _Email_.
    
    You can also resize and group columns in the  **Grid List Editor Designer**. See the following help section for more information:  [Design-Time Customization](https://docs.devexpress.com/eXpressAppFramework/113679/ui-construction/views/layout/list-view-columns-customization?v=22.1#1).
    
    To reset column settings, right-click the  **Views**  |  **MySolution.Module.BusinessObjects**  |  **Contact_ListView**  |  **Columns**  node and select  **Reset Differences**.
    
4.  Run the application. The  **Contact**  List View displays the  _FullName_,  _Department_,  _Position_, and  _Email_  columns.
    
    ![Result of the List View layout customization](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-change-field-layout-result.png?v=22.1)

    
# Change List View Filters

This lesson describes three techniques used to filter a List View. Filters will be applied to the  **Contact**  List View.

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   Inherit from the Business Class Library Class ([XPO](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1)/[EF core](https://docs.devexpress.com/eXpressAppFramework/402981/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/inherit-from-the-business-class-library-class-ef-core?v=22.1))
>-   Implement Custom Business Classes and Reference Properties ([XPO](https://docs.devexpress.com/eXpressAppFramework/402163/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/implement-custom-business-classes-and-reference-properties-xpo?v=22.1)/[EF core](https://docs.devexpress.com/eXpressAppFramework/402978/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/implement-custom-business-classes-and-reference-properties-ef-core?v=22.1))
>-   Set a One-to-Many Relationship ([XPO](https://docs.devexpress.com/eXpressAppFramework/402169/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/set-a-one-to-many-relationship-xpo?v=22.1)/[EF](https://docs.devexpress.com/eXpressAppFramework/402984/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/set-a-one-to-many-relationship-ef-core?v=22.1))
>-   Filter Data Source for a Lookup Editor ([XPO](https://docs.devexpress.com/eXpressAppFramework/404170/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/filter-data-source-for-lookup-editor-xpo?v=22.1)[EF Core](https://docs.devexpress.com/eXpressAppFramework/402139/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/filter-lookup-editor-data-source-ef-core?v=22.1)
>-   [Place an Action in a Different Location](https://docs.devexpress.com/eXpressAppFramework/402145/getting-started/in-depth-tutorial-blazor/ui-customization/place-an-action-in-a-different-location?v=22.1)

## Show a Filter Action

This technique allows end users to apply predefined filters to a List View.

1.  Open the  **Model.DesignedDiffs.xafml**  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1). Navigate to the  **Views**  |  **MySolution.Module.BusinessObjects**  |  **Contact_ListView**  node. Right-click the  **Filters**  child node and select  **Add**  |  **ListViewFilterItem**. For the new node, set the  **Id**  property to  _Development Department Contacts_. Set the  **Criteria**  property to  `[Department.Title] = 'Development Department'`.
    
    ![Development Department ListViewFilterItem properties](https://docs.devexpress.com/eXpressAppFramework/images/filter-list-views-filter-action.png?v=22.1)
    
    **Criteria**  properties use  [Criteria Language Syntax](https://docs.devexpress.com/CoreLibraries/4928/devexpress-data-library/criteria-language-syntax?v=22.1).
    
    You can also construct a filter criteria in the  **Filter Builder**  dialog. To open this dialog, click the ellipsis button (![EllipsisButton](https://docs.devexpress.com/eXpressAppFramework/images/ellipsisbutton116182.png?v=22.1)) to the right of the  **Criteria**  value.
    
    ![Filter Builder](https://docs.devexpress.com/eXpressAppFramework/images/filter-list-views-filter-builder.png?v=22.1)
    
2.  Add another child node to the  **Filters**  node. Set the  **Id**  property to  _Developers_  and the  **Criteria**  property to  `[Position.Title] = 'Developer'`.
    
    ![Developer ListViewFilterItem properties](https://docs.devexpress.com/eXpressAppFramework/images/filter-list-views-filter-action1.png?v=22.1)
    
3.  Add one more child node to the  **Filters**  node. Set the  **Id**  property to  _All Contacts_  and leave the  **Criteria**  property empty. This item will display all  **Contact**  objects in the List View.
    
    ![All Contacts ListViewFilterItem properties](https://docs.devexpress.com/eXpressAppFramework/images/filter-list-views-filter-action2.png?v=22.1)
    
4.  For the  **Filters**  node, set the  **CurrentFilter**  property to  _Developers_. The Developers filter will be initially applied to the  **Contact**  List View.
    
    ![Filters node properties](https://docs.devexpress.com/eXpressAppFramework/images/filter-list-views-filter-action3.png?v=22.1)
    
5.  Run the application and check that the  **SetFilter**  Action is available.
    
    ![Filters node properties](https://docs.devexpress.com/eXpressAppFramework/images/filter-list-views-filter-action-result.png?v=22.1)
    

## Set a Static Filter in the Model Editor

The  **Model Editor**  also allows you to filter List View records without any indication in the UI.

1.  In the  _MySolution.Module_  project, open the  **Model.DesignedDiffs.xafml**  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1). Navigate to the  **Views**  |  **MySolution.Module.BusinessObjects**  |  **Contact**  |  **Contact_ListView**  node. Set its  **Criteria**  property to  `Position.Title = 'Developer'`.
    
    ![Apply filters in the Model Editor](https://docs.devexpress.com/eXpressAppFramework/images/filter-list-views-model-editor.png?v=22.1)
    
2.  Run the application and check that the  **Contact**  List View displays only developers.
    
    ![Filtered List View](https://docs.devexpress.com/eXpressAppFramework/images/filter-list-views-model-editor-result.png?v=22.1)
    

## Set a Filter in Code

You can create filters that cannot be disabled in the application UI nor in the Model Editor.

1.  In the  **Solution Explorer**, right-click the  _Controllers_  folder in the  _MySolution.Module_  project, and choose  **Add DevExpress Item**  |  **New Item…**  to invoke the  [Template Gallery](https://docs.devexpress.com/eXpressAppFramework/113455/installation-upgrade-version-history/visual-studio-integration/template-gallery?v=22.1).
    
2.  Select the  **XAF Controllers** | **View Controller**  Visual Studio template. Specify  _FilterListViewController_  as the new item’s name and click  **Add Item**.
    
3.  In the autogenerated  _FilterListViewController.cs_  file, inherit the controller from the  [ObjectViewController<ViewType, ObjectType>](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.ObjectViewController-2?v=22.1):

    ```csharp
    using DevExpress.Data.Filtering;
    using DevExpress.ExpressApp;
    using MySolution.Module.BusinessObjects;
    // ...
    
    public partial class FilterListViewController : ObjectViewController<DetailView, Contact> {
        public FilterListViewController() {
            InitializeComponent();
        }
        // ...
    }
    
    ```
    
4.  Override the  `OnActivated`  method:
  
    ```csharp
    public partial class FilterListViewController : ObjectViewController<DetailView, Contact> {
        // ...       
        protected override void OnActivated() {
            base.OnActivated();
            //Specify a filter criteria.
            View.CollectionSource.Criteria["Developers"] = CriteriaOperator.FromLambda<Contact>(c => c.Position.Title == "Developer");
        }
        // ...
    }
    
    ```
    
5.  Run the application and check the filter in the  **Contact**  List View.

# Group List View Data

This topic explains how to group List View data and uses the  **Department**  and  **Position**  properties created in the previous steps to group the  **Contact**  List View data.

>NOTE
Before you proceed, take a moment to review the following lesson:
>-   [Place an Action in a Different Location](https://docs.devexpress.com/eXpressAppFramework/402145/getting-started/in-depth-tutorial-blazor/ui-customization/place-an-action-in-a-different-location?v=22.1)

## Step-by-Step Instructions

1.  Open the  _Model.DesignedDiffs.xafml_  file in the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1).
    
2.  Click the  **Views**  |  **MySolution.Module.BusinessObjects**  |  **Contact**  |  **Contact_ListView**  |  **Columns**  node to open the  **Grid List Editor Designer**. Right-click the table header and select the  **Show Group By Box**  item.
    
    ![Show Group By Box](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-show-group-box.png?v=22.1)
    
3.  The  **Group Panel**  appears above the column headers.
    
    ![Group Panel](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-show-group-panel.png?v=22.1)
    
4.  Drag the  **Department**  and  **Position**  column headers to the  **Group Panel**. Note that multiple columns in the group area create nested groups.
    
    When you add a column to the  **Group Panel**, the column’s  `GroupIndex`  property value changes. You can also directly specify a column’s  `GroupIndex`  property to group List View data. See the following topic for more information:  [List View Columns Customization](https://docs.devexpress.com/eXpressAppFramework/113679/ui-construction/views/layout/list-view-columns-customization?v=22.1).
    
    You can hide the  **Group Panel**  to prevent users from changing groups. Navigate to the  **Views**  |  **MySolution.Module.BusinessObjects**  |  **Contact**  |  **Contact_ListView**  node and set its  **IsGroupPanelVisible**  property to  `False`.
    
5.  Run the application. The  **Contact**  List View is grouped by the  **Department**  and  **Position**  fields and the  **Group Panel**  is displayed.
    
    ![The grouped Contact List View ](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-show-group-result.png?v=22.1)
    
6.  Users can also drag columns to and from the  **Group Panel**  to group and ungroup List View Data.
![gif](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-show-group-users.gif?v=22.1)


# Additional Modules

The  **eXpressApp Framework**  supplies some features in separate assemblies called  [modules](https://docs.devexpress.com/eXpressAppFramework/118046/application-shell-and-base-infrastructure/application-solution-components/modules?v=22.1#modules-shipped-with-xaf). For information on how to add and use these features in your applications, see the following lessons:

-   [Attach Files to Objects](https://docs.devexpress.com/eXpressAppFramework/403288/getting-started/in-depth-tutorial-blazor/additional-modules/attach-files-to-objects?v=22.1)
-   [Create Several View Variants](https://docs.devexpress.com/eXpressAppFramework/403380/getting-started/in-depth-tutorial-blazor/additional-modules/create-multiple-view-variants?v=22.1)

# Attach Files to Objects (.NET 6)

This lesson describes how to attach file collections to business objects. In this tutorial, we will add the  [File Attachment](https://docs.devexpress.com/eXpressAppFramework/112781/document-management/file-attachments-module?v=22.1)  Module to an ASP.NET Core Blazor application, and implement new business classes:  `Resume`  to store a Contact’s resume information and  `PortfolioFileData`  to save file data collection items.

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   Implement Custom Business Classes and Reference Properties ([XPO](https://docs.devexpress.com/eXpressAppFramework/402163/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/implement-custom-business-classes-and-reference-properties-xpo?v=22.1)/[EF](https://docs.devexpress.com/eXpressAppFramework/402978/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/implement-custom-business-classes-and-reference-properties-ef-core?v=22.1))
>-   Inherit from the Business Class Library Class ([XPO](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1)/[EF](https://docs.devexpress.com/eXpressAppFramework/402981/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/inherit-from-the-business-class-library-class-ef-core?v=22.1))
>-   Set a One-to-Many Relationship ([XPO](https://docs.devexpress.com/eXpressAppFramework/402169/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/set-a-one-to-many-relationship-xpo?v=22.1)/[EF](https://docs.devexpress.com/eXpressAppFramework/402984/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/set-a-one-to-many-relationship-ef-core?v=22.1))
>-   Implement Property Value Validation in Code ([XPO](https://docs.devexpress.com/eXpressAppFramework/402165/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/implement-property-value-validation-in-code-xpo?v=22.1)/[EF](https://docs.devexpress.com/eXpressAppFramework/402980/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/implement-property-value-validation-in-code-ef-core?v=22.1))

## Step-by-Step Instructions

1.  Add the  **DevExpress.ExpressApp.FileAttachment.Blazor**  NuGet package to the  _MySolution.Blazor.Server_  project. See the following topic for more information on how to install DevExpress NuGet packages:  [Install DevExpress Controls Using NuGet Packages](https://docs.devexpress.com/GeneralInformation/115912/installation/install-devexpress-controls-using-nuget-packages?v=22.1).
    
2.  In the  _Startup.cs_  file, call the  [AddFileAttachments(IModuleBuilder<IBlazorApplicationBuilder>, Action<FileAttachmentsOptions>)](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.Blazor.ApplicationBuilder.FileAttachmentsApplicationBuilderExtensions.------n-Y-----j-?v=22.1)  method to add the File Attachment Module to your application:
  
    ```csharp
    public class Startup {
    // ...
        public void ConfigureServices(IServiceCollection services) {
            // ...
            services.AddXaf(Configuration, builder => {
                builder.UseApplication<MySolutionBlazorApplication>();
                builder.Modules
                    .AddConditionalAppearance()
                    // ...
                    .AddFileAttachments()
                // ...
            });
            // ...
        }
    }
    
    ```
    
    If you add the  [File Attachment](https://docs.devexpress.com/eXpressAppFramework/112781/document-management/file-attachments-module?v=22.1)  Module when you create an XAF application, the  [Solution Wizard](https://docs.devexpress.com/eXpressAppFramework/113624/installation-upgrade-version-history/visual-studio-integration/solution-wizard?v=22.1)  generates the code used to add the File Attachment Module automatically.
    
3.  Right-click the  _Business Objects_  folder in the  _MySolution.Module_  project and choose  **Add Item**  |  **Class…**  Specify  _Resume.cs_  as the new file name and click  **Add**.
    
4.  Replace the generated class declaration with the following code:

    
    ```csharp
    using DevExpress.Persistent.Base;
    using DevExpress.Persistent.BaseImpl;
    using DevExpress.Xpo;
    using MySolution.Module.BusinessObjects;
    
    namespace MySolution.Module.BusinessObjects {
        [DefaultClassOptions]
        [ImageName("BO_Resume")]
        public class Resume : BaseObject {
            public Resume(Session session) : base(session) {}
            private Contact contact;
            [Association("Contact-Resumes")]
            public Contact Contact {
                get { return contact; }
                set { SetPropertyValue(nameof(Contact), ref contact, value); }
            }
            [Aggregated, Association("Resume-PortfolioFileData")]
            public XPCollection<PortfolioFileData> Portfolio {
                get { return GetCollection<PortfolioFileData>(nameof(Portfolio)); }
            }
        }
    }   
    
    ```
    
5.  Add the  `Resume`  property to the  `Contact`  class:
    

    
    ```csharp
    namespace MySolution.Module.BusinessObjects {
        [DefaultClassOptions]
        public class Contact : Person {
            // ...
            [Association("Contact-Resumes")]
            public XPCollection<Resume> Resumes {
                get { return GetCollection<Resume>(nameof(Resumes)); }
            }
        }
    } 
    
    ```
    
6.  Add another class to the  _MySolution.Module_  project and name it  _PortfolioFileData_. Replace the generated class declaration with the following code:
    

    
    ```csharp
    using DevExpress.Persistent.BaseImpl;
    using DevExpress.Xpo;
    
    namespace MySolution.Module.BusinessObjects {
        public class PortfolioFileData : FileAttachmentBase {
            public PortfolioFileData(Session session) : base(session) { }
            private Resume resume;
            [Association("Resume-PortfolioFileData")]
            public Resume Resume {
                get { return resume; }
                set { SetPropertyValue(nameof(Resume), ref resume, value); }
            }
            public override void AfterConstruction() {
                base.AfterConstruction();
                documentType = DocumentType.Unknown;
            }
            private DocumentType documentType;
            public DocumentType DocumentType {
                get { return documentType; }
                set { SetPropertyValue(nameof(DocumentType), ref documentType, value); }
            }
        }
        public enum DocumentType {
            SourceCode = 1, Tests = 2, Documentation = 3,
            Diagrams = 4, ScreenShots = 5, Unknown = 6
        };
    }    
    
    ```
    
    In this lesson, we derive  `PortfolioFileData`  from the  `FileAttachmentBase`  class in the XPO-based application and from the  `FileAttachment`  class in the EF Core-based application.  `FileAttachmentBase`  and  `FileAttachment`  are  [Business Class Library](https://docs.devexpress.com/eXpressAppFramework/112571/business-model-design-orm/built-in-business-classes-and-interfaces?v=22.1)  classes. These classes can store files in the database. For more information about file attachment properties, see the following topics:  **File Attachment Properties in**  [XPO](https://docs.devexpress.com/eXpressAppFramework/113549/business-model-design-orm/data-types-supported-by-built-in-editors/file-attachment-properties/file-attachment-properties-in-xpo?v=22.1)/[EF Core](https://docs.devexpress.com/eXpressAppFramework/113550/business-model-design-orm/data-types-supported-by-built-in-editors/file-attachment-properties/file-attachment-properties-in-entity-framework?v=22.1).
    
    In the XPO-based application, we initialize the  `PortfolioFileData.DocumentType`  property in the  [AfterConstruction()](https://docs.devexpress.com/eXpressAppFramework/DevExpress.Persistent.BaseImpl.BaseObject.AfterConstruction?v=22.1)  method that is called after the corresponding object’s creation. See the following topic for details:  [How to: Initialize Business Objects with Default Property Values in XPO](https://docs.devexpress.com/eXpressAppFramework/113258/business-model-design-orm/business-model-design-with-xpo/initialize-business-objects-with-default-property-values-in-xpo?v=22.1).
    
7.  In EF Core-based applications, add the  [Required](https://docs.microsoft.com/dotnet/api/system.componentmodel.dataannotations.requiredattribute)  attribute to the  `Resume`  property in the  `PortfolioFileData`  class.

    
    ```csharp
    using DevExpress.Persistent.BaseImpl.EF;
    
    namespace MySolution.Module.BusinessObjects {
        [ImageName("BO_FileAttachment")]
        public class PortfolioFileData : FileAttachment {
            public PortfolioFileData()
                : base() {
                DocumentType = DocumentType.Unknown;
            }
            //..           
            [Required]
            public virtual Resume Resume { get; set; }
            //...
            }
        }
        //...
    }
    
    ```
    
    The  `Resume`  and  `PortfolioFileData`  classes are connected with a One-to-Many relationship. For more information on how to create a one-to-many relationship between business objects, see the following topics:  **Set a One-to-Many Relationship**  ([XPO](https://docs.devexpress.com/eXpressAppFramework/402169/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/set-a-one-to-many-relationship-xpo?v=22.1)/[EF Core](https://docs.devexpress.com/eXpressAppFramework/402984/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/set-a-one-to-many-relationship-ef-core?v=22.1)).
    
    In the EF Core-based application, a deletion of a master object does not delete the related objects. In this lesson, we use the  [Required](https://docs.microsoft.com/dotnet/api/system.componentmodel.dataannotations.requiredattribute)  attribute to configure the associations between classes. This way you can delete the referenced objects with the master object and avoid integrity violation.
    
    Alternatively, you can use the  [Fluent API](https://docs.microsoft.com/en-us/ef/core/modeling/#use-fluent-api-to-configure-a-model)  and specify the  [OnDelete](https://learn.microsoft.com/dotnet/api/microsoft.entityframeworkcore.metadata.builders.referencecollectionbuilder.ondelete)  method for the  `Portfolio`-`Resume`  relationship as described in the following topic:  [The Fluent API OnDelete Method](https://www.learnentityframeworkcore.com/configuration/fluent-api/ondelete-method).
    
8.  Add the  [RuleRequiredFieldAttribute](https://docs.devexpress.com/eXpressAppFramework/DevExpress.Persistent.Validation.RuleRequiredFieldAttribute?v=22.1)  attribute to the  `Resume`  property to implement property value validation:

    
    ```csharp
    using DevExpress.Persistent.BaseImpl;
    using DevExpress.Xpo;
    
    namespace MySolution.Module.BusinessObjects {
        public class PortfolioFileData : FileAttachmentBase {
            public PortfolioFileData(Session session) : base(session) { }
            private Resume resume;
            [Association("Resume-PortfolioFileData")]
            [RuleRequiredField(DefaultContexts.Save)]
            public Resume Resume {
                get { return resume; }
                set { SetPropertyValue(nameof(Resume), ref resume, value); }
            }
            //...
        }
        //..
    }    
    
    ```
    
    For additional information on validation, refer to the following article:  [Validation (Prevent Data Errors)](https://docs.devexpress.com/eXpressAppFramework/113684/validation-module?v=22.1).
    
9.  In EF Core-based applications, open the  _MySolution.Module.BusinessObjects\MySolutionDbContext.cs_  file and add the properties of  `Resume`,  `PortfolioFileData`, and  `FileAttachments`  types to the  `DbContext`:
    

    ```csharp
    public class MySolutionDbContext : DbContext {
        //...
        public DbSet<Resume> Resumes { get; set; }
        public DbSet<PortfolioFileData> PortfolioFileData { get; set; }
        public DbSet<FileAttachment> FileAttachments { get; set; }
    }
    
    ```
    
10.  Add a migration and update the database. See the following section for details:  [Use a DBMS: Setup Migrations](https://docs.devexpress.com/eXpressAppFramework/404144/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/create-a-solution-ef-core?v=22.1#use-a-dbms-setup-migrations).
    
11.  Run the application. Open the  **Resume**  List View and create a new  **Resume**  object. Fill the  **Contact**  field and add a new  **Portfolio File Data**  object. In the  **Portfolio File Data**  window, specify the  **Document Type**  and select the file that you wish to attach.
![](https://docs.devexpress.com/eXpressAppFramework/images/blazor-tutorial-file-attachment-add-file.gif?v=22.1)

Users can click the file link to download the resume file.

To get a file stored within a  `PortfolioFileData`  object in code, use the  `IFileData.SaveToStream`  method of its  `File`  property.

# Create Multiple View Variants (.NET 6)

This lesson explains how to create multiple customized variants of the same View, and allow a user to choose the desired View variant at runtime.

Variants are available for List Views and Detail Views. In this lesson, we create two variants of the  **Contact**  List View in the  **Model Editor**. We reference the  **View Variants**  Module and add the  **Change Variant**  Action to switch between these View variants.

>NOTE
Before you proceed, take a moment to review the following lessons:
>-   Inherit from the Business Class Library Class ([XPO](https://docs.devexpress.com/eXpressAppFramework/402166/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-xpo/inherit-from-the-business-class-library-class-xpo?v=22.1)/[EF](https://docs.devexpress.com/eXpressAppFramework/402981/getting-started/in-depth-tutorial-blazor/business-model-design/business-model-design-with-ef-core/inherit-from-the-business-class-library-class-ef-core?v=22.1))
>-   [Change Field Layout and Visibility in a List View](https://docs.devexpress.com/eXpressAppFramework/403230/getting-started/in-depth-tutorial-blazor/ui-customization/change-field-visibility-in-a-list-view?v=22.1)

## Step-by-Step Instructions

1.  Add the  **DevExpress.ExpressApp.ViewVariantsModule**  NuGet package to the  _MySolution.Module_  project. See the following topic for more information on how to install DevExpress NuGet packages:  [Install DevExpress Controls Using NuGet Packages](https://docs.devexpress.com/GeneralInformation/115912/installation/install-devexpress-controls-using-nuget-packages?v=22.1).
    
2.  In the  _MySolution.Module\Module.cs_  file, add the View Variants Module to the  [ModuleBase.RequiredModuleTypes](https://docs.devexpress.com/eXpressAppFramework/DevExpress.ExpressApp.ModuleBase.RequiredModuleTypes?v=22.1)  list:
   
    ```csharp
    using DevExpress.ExpressApp.ViewVariantsModule;
    
    namespace MySolution.Module {
        public sealed partial class MySolutionModule : ModuleBase {
            public MySolutionModule() {
                // ...
                RequiredModuleTypes.Add(typeof(ViewVariantsModule));
            }
            // ...
        }
    }
    
    ```
    
3.  Build the project.
    
4.  Invoke the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1)  for the  _MySolution.Module_  project. Right-click the  **Views**  node and select  **Add…**  |  **ListView**.
    
    ![Add ListView](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-view-variants-module-add-view1.png?v=22.1)
    
5.  For the new node, set the  **Id**  property to  _Contact_ListView_AllColumns_  and the  **ModelClass**  property to  _MySolution.Module.BusinessObjects.Contact_.
    
    ![Add ListView](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-view-variants-module-add-view.png?v=22.1)
    
6.  Right-click the newly created node and select  **Generate Content**. The Model Editor uses information from the  _Contact_  class (the  **BOModel**  |  **Contact**  node) and its ancestors to generate columns. As a result,  _Contact_ListView_AllColumns_  contains all  **Contact**  columns.
    
    ![Generate View content](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-view-variants-module-generate-content.png?v=22.1)
    
7.  Right-click the  **Views**  node and select  **Add…**  |  **ListView**. For the new node, set the  **Id**  property to  _Contact_ListView_Varied_  and the  **ModelClass**  property to  _MySolution.Module.BusinessObjects.Contact_. Do not generate content for this node.
    
8.  Expand the newly added  **Contact_ListView_Varied**  node, right-click the  **Variants**  child node, and select  **Add…**  |  **Variant**.
    
    ![Generate View content](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-view-variants-module-add-variant.png?v=22.1)
    
9.  Set the  **View**  property to  `Contact_ListView`  and the  **Id**  and  **Caption**  properties to  `Multiple columns`.
    
    ![Set Variant Properties](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-view-variants-module-set-properties.png?v=22.1)
    
1.  Right-click the  **Variants**  node and select  **Add…**  |  **Variant**. For the new node, set the  **View**  property to  `Contact_ListView_AllColumns`, and the  **Id**  and  **Caption**  properties to  `All columns`.
    
    ![Add All Columns Variant](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-view-variants-module-all-variant.png?v=22.1)
    
2.  Navigate to the  **NavigationItems** | **Items** | **Default** | **Items**  |  **Contact**  node. Set its  **View**  property to  `Contact_ListView_Varied`.
    
    ![Set Default View for the Navigation Item](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-view-variants-module-nav-item.png?v=22.1)
    
3.  Run the Blazor Application. Select the  **Contact**  item. The  **Contact**  List View contains the  **Change Variant**  Action. The  **Change Variant**  Action includes items specified in the  **Model Editor**.
    
    ![Result](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-view-variants-module-result.png?v=22.1)
    

## Additional Information

### Specify Variant Sort Order

You can use the  **Index**  property to specify the sort order of variants in the  **Change Variant**  Action drop-down list. Additionally, you can set the  **Current**  property of the  **Variants**  node to specify the default variant.

### Add View Variants to the Navigation Control

Invoke the  [Model Editor](https://docs.devexpress.com/eXpressAppFramework/112582/ui-construction/application-model-ui-settings-storage/model-editor?v=22.1)  and set the  **GenerateRelatedViewVariantsGroup**  property of the  **NavigationItems**  node to  `true`  to add View variants to the navigation control.

![Add View Variants to the Navigation Control](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-view-variants-module-optional.png?v=22.1)

As a result, the  **Contact**  navigation item exposes child items for each View variant.

![View Variants in the Navigation Control](https://docs.devexpress.com/eXpressAppFramework/images/tutorial-view-variants-module-navigation.png?v=22.1)

![image](https://github.com/jjcolumb/In-Depth-XAF-ASP.NET-Core-Blazor-UI-Tutorial/assets/126447472/3485e86c-3904-41fa-bef9-c56806650c16)
